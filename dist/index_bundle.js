!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s={goBack:"goBack",redirect:"redirect"},a={submit:"SignIn-submit",errors:"SignIn-errors"},r={submit:"SignUp-submit",errors:"SignUp-errors"},o={submit:"ProfileEdit-submit",errors:"ProfileEdit-errors"},i={needUserData:"ProfileView-needUserData"},u={needData:"mainPageView-needData",selectLetter:"mainPageView-selectLetter"},l={needGetFolderList:"mainPageController-needGetFolderList",needGetLetterList:"mainPageController-needGetLetterList",needGetLetter:"mainPageController-needGetLetter"},c={sendLetter:"sendLetterView-sendLetter"},p={needData:"navbar-needData"},m={getLetter:{success:"letterModelEvents-getLetter-success",fail:"letterModelEvents-getLetter-fail"},getLetterList:{success:"letterModelEvents-getLetterList-success",fail:"letterModelEvents-getLetterList-fail"},getFolderList:{success:"letterModelEvents-getFolderList-success",fail:"letterModelEvents-getFolderList-fail"},sendLetter:{success:"letterModelEvents-sendLetter-success",fail:"letterModelEvents-sendLetter-fail"}},g={signIn:{success:"UserModel-authorizationSuccess",fail:"UserModel-authorizationFail"},signUp:{success:"UserModel-signupSuccess",fail:"UserModel-signupFail"},profileEdit:{success:"UserModel-profileEditSuccess",fail:"UserModel-profileEditFail"},profileGetData:{success:"profile-successGetData",fail:"fail-getData"}},f="/signin",d="/signup",h="/profile",b="/profileEdit",v="/letters",y="/sendLetter",w="/logout";function T(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var L=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"on",value:function(e,t){return this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t),this}},{key:"off",value:function(e,t){var n=this._eventHandlers&&this._eventHandlers[e];n&&(n=n.filter((function(e){return e!==t})),this._eventHandlers[e]=n)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];console.log("EMIT",e,s),this._eventHandlers&&this._eventHandlers[e]&&this._eventHandlers[e].forEach((function(e){return e.apply(t,s)}))}}])&&T(t.prototype,n),s&&T(t,s),e}());function C(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var P=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registeredPathes={},window.onpopstate=function(e){e.preventDefault(),console.log("HISTORY EVENT",e);try{t.registeredPathes[e.state.path].render(e.state.data)}catch(e){location=location.href}},L.on(s.redirect,this.go.bind(this)),L.on(s.goBack,this.back.bind(this))}var t,n,a;return t=e,(n=[{key:"register",value:function(e,t){this.registeredPathes[e]=t}},{key:"start",value:function(e,t){window.history.pushState({path:e,data:t||1},"Start",e),this.registeredPathes[e].render(t)}},{key:"go",value:function(e){console.log("GOOO",e),e&&(this.registeredPathes[e.path].render(e.data||0),window.history.pushState({path:e.path,data:e.data||0},e.path,e.path))}},{key:"back",value:function(){console.log("I'L BE BACK"),window.history.back(),console.log("href",location.pathname),this.registeredPathes[location.pathname].render()}}])&&C(t.prototype,n),a&&C(t,a),e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=B(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=E(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function x(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=x(e[o]))&&(r&&t[o]&&(n=E(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==B(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&V.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function E(e){var t=""+e,n=k.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var V=Object.prototype.hasOwnProperty,k=/["&<>]/;function N(e){var t,s,a,r="",o={};try{var i={".//src/Views/PugTemplates/SignInForm.pug":"include  BaseComponents/button\ninclude BaseComponents/pageTitle\ninclude BaseComponents/Text\ninclude BaseComponents/avatar\ninclude BaseComponents/classNames\n\n+pageTitle('Войти')\nform(method='POST' class=classNames.formClass)\n    +text('Login')\n    input(type='text', name='email', class=classNames.inputClass)\n    +text('Password')\n    input(type='password', name='password', class=classNames.inputClass)\n    input(type='submit', value='Войти', class=classNames.inputClass)\n    +button('Регистрация','signup', classNames.loginButton)\n    +button('Назад','back', classNames.regButton)\n\n//export {signinformTemplate}","src/Views/PugTemplates/BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","src/Views/PugTemplates/BaseComponents/pageTitle.pug":"mixin pageTitle(text, className)\n    h1(class=className) #{text}","src/Views/PugTemplates/BaseComponents/Text.pug":"mixin text(text, name)\n    p(class='MainTitle', name=name) #{text}","src/Views/PugTemplates/BaseComponents/avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)","src/Views/PugTemplates/BaseComponents/classNames.pug":"- var classNames ={inputClass:'login-reg-input',formClass:'login-form',regButton:'reg-button',loginButton:'login-button', sendLetterButton:'send-button'}"};a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(S("class",x([o],[!0]),!1,!1)+S("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+E(null==(t=e)?"":t)+"</button>"},a=1,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",o.pageTitle=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+"<h1"+S("class",x([n],[!0]),!1,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+E(null==(t=e)?"":t)+"</h1>"},a=1,s="src/Views/PugTemplates/BaseComponents/Text.pug",o.text=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+'<p class="MainTitle"'+S("name",n,!0,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+E(null==(t=e)?"":t)+"</p>"},a=1,s="src/Views/PugTemplates/BaseComponents/avatar.pug",a=1,s="src/Views/PugTemplates/BaseComponents/classNames.pug";var u={inputClass:"login-reg-input",formClass:"login-form",regButton:"reg-button",loginButton:"login-button",sendLetterButton:"send-button"};a=7,s=".//src/Views/PugTemplates/SignInForm.pug",o.pageTitle("Войти"),a=8,s=".//src/Views/PugTemplates/SignInForm.pug",r=r+"<form"+S("class",x([u.formClass],[!0]),!1,!1)+' method="POST">',a=9,s=".//src/Views/PugTemplates/SignInForm.pug",o.text("Login"),a=10,s=".//src/Views/PugTemplates/SignInForm.pug",r=r+"<input"+S("class",x([u.inputClass],[!0]),!1,!1)+' type="text" name="email"/>',a=11,s=".//src/Views/PugTemplates/SignInForm.pug",o.text("Password"),a=12,s=".//src/Views/PugTemplates/SignInForm.pug",r=r+"<input"+S("class",x([u.inputClass],[!0]),!1,!1)+' type="password" name="password"/>',a=13,s=".//src/Views/PugTemplates/SignInForm.pug",r=r+"<input"+S("class",x([u.inputClass],[!0]),!1,!1)+' type="submit" value="Войти"/>',a=14,s=".//src/Views/PugTemplates/SignInForm.pug",o.button("Регистрация","signup",u.loginButton),a=15,s=".//src/Views/PugTemplates/SignInForm.pug",o.button("Назад","back",u.regButton),r+="</form>",a=17,s=".//src/Views/PugTemplates/SignInForm.pug",r+="\x3c!--export {signinformTemplate}--\x3e"}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function A(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,L.on(g.signIn.fail,this.showErrors.bind(this))}var t,n,r;return t=e,(n=[{key:"render",value:function(){this.element.innerHTML=N();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("signup")[0],n=document.getElementsByName("back")[0];e.addEventListener("submit",(function(t){t.preventDefault();var n=new FormData(e);L.emit(a.submit,{target:"SignInView",data:n})})),n.addEventListener("click",(function(e){e.preventDefault(),L.emit(s.goBack)})),t.addEventListener("click",(function(e){e.preventDefault(),L.emit(s.redirect,{path:d})}))}},{key:"showErrors",value:function(e){console.log("SIGN IN ERRORS SHOW",e.errors);var t=document.getElementsByName("password")[0],n=document.getElementsByName("email")[0];console.log(e.password),e.password&&(t.value="",t.placeholder=e.password),e.email&&(n.value="",n.placeholder=e.email)}}])&&A(t.prototype,n),r&&A(t,r),e}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=F(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=I(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function U(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=U(e[o]))&&(r&&t[o]&&(n=I(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==F(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&M.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function I(e){var t=""+e,n=j.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var M=Object.prototype.hasOwnProperty,j=/["&<>]/;function _(e){var t,s,a,r="",o={};try{var i={".//src/Views/PugTemplates/SignUpForm.pug":"include  BaseComponents/button\ninclude  BaseComponents/button\ninclude BaseComponents/pageTitle\ninclude BaseComponents/Text\ninclude BaseComponents/avatar\ninclude BaseComponents/classNames\n\n+pageTitle('Зарегистрироваться')\n\nform(method='POST', enctype = 'multipart/form-data', class='reg-form')\n    p(class='InputTitle') Имя\n    input(type='text', name='name', class=classNames.inputClass)\n    p(class='InputTitle') Фамилия\n    input(type='text', name='surname', class=classNames.inputClass)\n    p(class='InputTitle') Email\n    input(type='text', name='email', class=classNames.inputClass)\n    p(class='InputTitle') Введите Пароль\n    input(type='password', name='password1', class=classNames.inputClass)\n    p(class='InputTitle') Повторите пароль\n    input(type='password', name='password2', class=classNames.inputClass)\n    p(class='InputTitle') Аватар\n    input(type='file', placeholder='Выберете аватар', name='avatar', class=classNames.inputClass)\n    input(type='submit', value='Зарегистироваться', class='submit', class=classNames.inputClass)\n    +button('Назад', 'back', classNames.regButton)\n\n//export {template}","src/Views/PugTemplates/BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","src/Views/PugTemplates/BaseComponents/pageTitle.pug":"mixin pageTitle(text, className)\n    h1(class=className) #{text}","src/Views/PugTemplates/BaseComponents/Text.pug":"mixin text(text, name)\n    p(class='MainTitle', name=name) #{text}","src/Views/PugTemplates/BaseComponents/avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)","src/Views/PugTemplates/BaseComponents/classNames.pug":"- var classNames ={inputClass:'login-reg-input',formClass:'login-form',regButton:'reg-button',loginButton:'login-button', sendLetterButton:'send-button'}"};a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(D("class",U([o],[!0]),!1,!1)+D("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+I(null==(t=e)?"":t)+"</button>"},a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(D("class",U([o],[!0]),!1,!1)+D("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+I(null==(t=e)?"":t)+"</button>"},a=1,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",o.pageTitle=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+"<h1"+D("class",U([n],[!0]),!1,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+I(null==(t=e)?"":t)+"</h1>"},a=1,s="src/Views/PugTemplates/BaseComponents/Text.pug",a=1,s="src/Views/PugTemplates/BaseComponents/avatar.pug",a=1,s="src/Views/PugTemplates/BaseComponents/classNames.pug";var u={inputClass:"login-reg-input",formClass:"login-form",regButton:"reg-button",loginButton:"login-button",sendLetterButton:"send-button"};a=8,s=".//src/Views/PugTemplates/SignUpForm.pug",o.pageTitle("Зарегистрироваться"),a=10,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<form class="reg-form" method="POST" enctype="multipart/form-data">',a=11,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=11,s=".//src/Views/PugTemplates/SignUpForm.pug",a=12,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Имя</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="text" name="name"/>',a=13,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=13,s=".//src/Views/PugTemplates/SignUpForm.pug",a=14,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Фамилия</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="text" name="surname"/>',a=15,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=15,s=".//src/Views/PugTemplates/SignUpForm.pug",a=16,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Email</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="text" name="email"/>',a=17,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=17,s=".//src/Views/PugTemplates/SignUpForm.pug",a=18,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Введите Пароль</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="password" name="password1"/>',a=19,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=19,s=".//src/Views/PugTemplates/SignUpForm.pug",a=20,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Повторите пароль</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="password" name="password2"/>',a=21,s=".//src/Views/PugTemplates/SignUpForm.pug",r+='<p class="InputTitle">',a=21,s=".//src/Views/PugTemplates/SignUpForm.pug",a=22,s=".//src/Views/PugTemplates/SignUpForm.pug",r=(r+="Аватар</p>")+"<input"+D("class",U([u.inputClass],[!0]),!1,!1)+' type="file" placeholder="Выберете аватар" name="avatar"/>',a=23,s=".//src/Views/PugTemplates/SignUpForm.pug",r=r+"<input"+D("class",U(["submit",u.inputClass],[!1,!0]),!1,!1)+' type="submit" value="Зарегистироваться"/>',a=24,s=".//src/Views/PugTemplates/SignUpForm.pug",o.button("Назад","back",u.regButton),r+="</form>",a=26,s=".//src/Views/PugTemplates/SignUpForm.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function R(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,L.on(g.signUp.fail,this.showErrors.bind(this))}var t,n,a;return t=e,(n=[{key:"render",value:function(){this.element.innerHTML=_();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("back")[0];e.addEventListener("submit",(function(t){t.preventDefault(),L.emit(r.submit,{target:"SignUpView",data:new FormData(e)})})),t.addEventListener("click",(function(e){e.preventDefault(),L.emit(s.goBack)}))}},{key:"showErrors",value:function(e){console.log("SIGN UP ERRORS SHOW",e);var t=document.getElementsByName("email")[0],n=document.getElementsByName("password1")[0],s=document.getElementsByName("password2")[0],a=document.getElementsByName("name")[0],r=document.getElementsByName("surname")[0];console.log(e.password1),e.password1?(n.value="",n.placeholder=e.password1):e.password2&&(s.value="",s.placeholder=e.password2),e.email&&(t.value="",t.placeholder=e.email),e.name&&(a.value="",a.placeholder=e.name),e.surname&&(r.value="",r.placeholder=e.surname)}}])&&R(t.prototype,n),a&&R(t,a),e}();function H(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var J=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"_checkEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"_checkName",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkSurname",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkPassword",value:function(e){return e.length>3}},{key:"_checkPasswordEqual",value:function(e,t){return e===t}},{key:"checkSignInForm",value:function(e){var t={};return this._checkEmail(e.get("email"))||(t.email="Некорректный email"),this._checkPassword(e.get("password"))||(t.password="слишком короткий пароль"),t}},{key:"checkSignUpForm",value:function(e){console.log("VALIDATOR SIGN UP",e.get("email"),e.get("password1"),e.get("password2"),e.get("name"),e.get("surname"));var t={};return this._checkEmail(e.get("email"))||(t.email="Некорректный email"),this._checkPassword(e.get("password1"))?this._checkPasswordEqual(e.get("password1"),e.get("password2"))||(t.password2="Пароли не совпадают"):t.password1="слишком короткий пароль",this._checkName(e.get("name"))||(t.name="Некорректное имя"),this._checkSurname(e.get("surname"))||(t.surname="Некорректная фамилия"),t}}])&&H(t.prototype,n),s&&H(t,s),e}());function q(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var z=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.user={},L.on(a.submit,this.signIn.bind(this)),L.on(r.submit,this.signUp.bind(this)),L.on(o.submit,this.editUser.bind(this)),L.on(i.needUserData,this.getUserData.bind(this))}var t,n,s;return t=e,(n=[{key:"setUrl",value:function(e){this.baseUrl=e}},{key:"signIn",value:function(e){var t=this,n=J.checkSignInForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN IN ",n),void L.emit(g.signIn.fail,n);console.log("SIGN IN ",e,this.baseUrl+f),fetch(this.baseUrl+f,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){200===e.Code?(L.on(g.profileGetData.success,(function e(){L.off(g.profileGetData.success,e),L.emit(g.signIn.success)})),t.getUserData()):401===e.Code?L.emit(g.signIn.fail,{password:e.Description}):404===e.Code?L.emit(g.signIn.fail,{email:e.Description}):L.emit(g.signIn.fail,{unknowError:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"signUp",value:function(e){var t=this,n=J.checkSignUpForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN UP ",n),void L.emit(g.signUp.fail,n);fetch(this.baseUrl+d,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?(L.on(g.profileGetData.success,(function e(){L.off(g.profileGetData.success,e),L.emit(g.signUp.success)})),t.getUserData()):L.emit(g.signUp.fail,{email:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"editUser",value:function(e){var t=this;fetch(this.baseUrl+h,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?t.getUserData(g.profileEdit):L.emit(g.profileEdit.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getUserData",value:function(){var e=this,t=fetch(this.baseUrl+h,{method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(console.log("RESP GET USER DATA",t.status,t),200!==t.Code)throw new Error(t.Description);e.user.name=t.User.Name,e.user.email=t.User.Email,e.user.surname=t.User.Surname,e.user.avatar=""})),n=fetch(this.baseUrl+"/getAvatar",{method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.blob()})).then((function(t){console.log("BLOB",t),e.user.avatar=URL.createObjectURL(t)}));Promise.all([t,n]).then((function(t){console.log("УСПЕХ"),console.log("USER",e.user),L.emit(g.profileGetData.success,e.user)}),(function(e){L.emit(g.profileGetData.fail,{errors:e.message})}))}},{key:"logout",value:function(){}}])&&q(t.prototype,n),s&&q(t,s),e}())("http://localhost:8080");function K(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.Letters=new Map,this.folders={},L.on(l.needGetLetter,this.getLetter.bind(this)),L.on(l.needGetLetterList,this.getLetterList.bind(this)),L.on(l.needGetFolderList,this.getFolders.bind(this)),L.on(c.sendLetter,this.sendLetter.bind(this))}var t,n,s;return t=e,(n=[{key:"getLetter",value:function(e){L.emit(m.getLetter.success,this.Letters[e])}},{key:"sendLetter",value:function(e){fetch(this.baseUrl+"/sendMessage",{method:"POST",mode:"cors",credentials:"include",body:e}).then((function(e){return e.json()})).then((function(e){console.log("RESP SEND LETTER",e),200===e.Code?(console.log("SUCCES SEND LETTER"),L.emit(m.sendLetter.success)):L.emit(m.sendLetter.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getFolders",value:function(){L.emit(m.getFolderList.success,["Входящие","Отправленные"])}},{key:"getLetterList",value:function(){var e=this;fetch(this.baseUrl+"/getLetters",{method:"POST",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("RESP GET LETTER LIST",t),200===t.Code?(console.log("SUCCES GET LETTER LETTER LIST"),e.Letters=new Map,t.Letters&&(t.Letters.forEach((function(t){e.Letters[t.Id]=t})),e.Letters.forEach((function(e){console.log("LETTTER",e)}))),L.emit(m.getLetterList.success,e.Letters)):L.emit(m.getLetterList.fail,{error:t.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}}])&&K(t.prototype,n),s&&K(t,s),e}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=Y(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=Q(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function $(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=$(e[o]))&&(r&&t[o]&&(n=Q(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==Y(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&X.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function Q(e){var t=""+e,n=ee.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var X=Object.prototype.hasOwnProperty,ee=/["&<>]/;function te(e){var t,s,a,r="",o={};try{var i={".//src/Views/PugTemplates/ProfilePage.pug":"include  BaseComponents/button\ninclude BaseComponents/pageTitle\ninclude BaseComponents/Text\ninclude BaseComponents/avatar\ninclude BaseComponents/classNames\n\n+pageTitle('Профиль')\n\ndiv\n    +text(locals.name + ' ' + locals.surname, 'profile_name')\n    +text('Email: ' + locals.email)\n    +text('Аватар')\n    +avatar(locals.avatar)\n    +button('Редактировать', 'editButton')\n    +button('Назад' ,name='back')\n\n\n//export {template}","src/Views/PugTemplates/BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","src/Views/PugTemplates/BaseComponents/pageTitle.pug":"mixin pageTitle(text, className)\n    h1(class=className) #{text}","src/Views/PugTemplates/BaseComponents/Text.pug":"mixin text(text, name)\n    p(class='MainTitle', name=name) #{text}","src/Views/PugTemplates/BaseComponents/avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)","src/Views/PugTemplates/BaseComponents/classNames.pug":"- var classNames ={inputClass:'login-reg-input',formClass:'login-form',regButton:'reg-button',loginButton:'login-button', sendLetterButton:'send-button'}"},u=e||{};(function(n){a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(Z("class",$([o],[!0]),!1,!1)+Z("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+Q(null==(t=e)?"":t)+"</button>"},a=1,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",o.pageTitle=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+"<h1"+Z("class",$([n],[!0]),!1,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+Q(null==(t=e)?"":t)+"</h1>"},a=1,s="src/Views/PugTemplates/BaseComponents/Text.pug",o.text=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+'<p class="MainTitle"'+Z("name",n,!0,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+Q(null==(t=e)?"":t)+"</p>"},a=1,s="src/Views/PugTemplates/BaseComponents/avatar.pug",o.avatar=t=function(e){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/avatar.pug",r=r+'<img width="70" height="70" id="avatar"'+Z("src",e,!0,!1)+"/>"},a=1,s="src/Views/PugTemplates/BaseComponents/classNames.pug";a=7,s=".//src/Views/PugTemplates/ProfilePage.pug",o.pageTitle("Профиль"),a=9,s=".//src/Views/PugTemplates/ProfilePage.pug",r+="<div>",a=10,s=".//src/Views/PugTemplates/ProfilePage.pug",o.text(e.name+" "+e.surname,"profile_name"),a=11,s=".//src/Views/PugTemplates/ProfilePage.pug",o.text("Email: "+e.email),a=12,s=".//src/Views/PugTemplates/ProfilePage.pug",o.text("Аватар"),a=13,s=".//src/Views/PugTemplates/ProfilePage.pug",o.avatar(e.avatar),a=14,s=".//src/Views/PugTemplates/ProfilePage.pug",o.button("Редактировать","editButton"),a=15,s=".//src/Views/PugTemplates/ProfilePage.pug",o.button("Назад","back"),r+="</div>",a=18,s=".//src/Views/PugTemplates/ProfilePage.pug",r+="\x3c!--export {template}--\x3e"}).call(this,"name"in u?u.name:"undefined"!=typeof name?name:void 0)}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e){var t=""+e,n=ae.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}Object.prototype.hasOwnProperty;var ae=/["&<>]/;function re(e){var t,s,a="",r={};try{var o={"navbar.pug":"include button\ninclude avatar\nmixin navbar(src)\n    ul()\n        li() LOGO\n        li()\n            a(name = 'navbar-send') 'Отправить'\n        li()\n            a(name = 'navbar-letters') 'Письма'\n        li()\n            +avatar(src)\n        li()\n            a(name = 'navbar-profile') 'Профиль'\n        li()\n            a(name = 'navbar-exit') 'Выйти'\n\n\n+navbar(locals.avatar)\n//export {template}","button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)"};s=1,t="button.pug",s=1,t="avatar.pug",r.avatar=function(e){this&&this.block,this&&this.attributes;s=2,t="avatar.pug",a=a+'<img width="70" height="70" id="avatar"'+function(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=ne(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=se(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}("src",e,!0,!1)+"/>"},s=3,t="navbar.pug",r.navbar=function(e){this&&this.block,this&&this.attributes;s=4,t="navbar.pug",a+="<ul>",s=5,t="navbar.pug",a+="<li>",s=5,t="navbar.pug",a+="LOGO</li>",s=6,t="navbar.pug",a+="<li>",s=7,t="navbar.pug",a+='<a name="navbar-send">',s=7,t="navbar.pug",a+="'Отправить'</a></li>",s=8,t="navbar.pug",a+="<li>",s=9,t="navbar.pug",a+='<a name="navbar-letters">',s=9,t="navbar.pug",a+="'Письма'</a></li>",s=10,t="navbar.pug",a+="<li>",s=11,t="navbar.pug",r.avatar(e),a+="</li>",s=12,t="navbar.pug",a+="<li>",s=13,t="navbar.pug",a+='<a name="navbar-profile">',s=13,t="navbar.pug",a+="'Профиль'</a></li>",s=14,t="navbar.pug",a+="<li>",s=15,t="navbar.pug",a+='<a name="navbar-exit">',s=15,t="navbar.pug",a+="'Выйти'</a></li></ul>"},s=18,t="navbar.pug",r.navbar(e.avatar),s=19,t="navbar.pug",a+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,t,s,o[t])}return a}function oe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var ie=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.body}var t,n,a;return t=e,(n=[{key:"render",value:function(e){if(e){this.element.innerHTML="",console.log("NAVBAR VIEW RENDER",e);var t=document.getElementById("navbar")||document.createElement("div");t.id="navbar",t.innerHTML=re(e),this.element.insertAdjacentHTML("beforeend",t.innerHTML);var n=document.getElementsByName("navbar-send")[0],a=document.getElementsByName("navbar-profile")[0],r=document.getElementsByName("navbar-exit")[0],o=document.getElementsByName("navbar-letters")[0];n.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),L.emit(s.redirect,{path:y})})),a.addEventListener("click",(function(e){e.preventDefault(),console.log("CLICK"),L.emit(s.redirect,{path:h})})),r.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),L.emit(s.redirect,{path:w})})),o.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),L.emit(s.redirect,{path:v})}))}else L.emit(p.needData)}},{key:"hide",value:function(){document.getElementById("navbar").innerHTML=""}}])&&oe(t.prototype,n),a&&oe(t,a),e}());function ue(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,a;return t=e,(n=[{key:"render",value:function(e){if(e){this.element.innerHTM="",ie.render(),this.element.insertAdjacentHTML("beforeend",te(e));var t=document.getElementsByName("editButton")[0],n=document.getElementsByName("back")[0];t.addEventListener("click",(function(t){t.preventDefault(),L.emit(s.redirect,{path:b,data:e})})),n.addEventListener("click",(function(e){e.preventDefault(),L.emit(s.goBack)}))}else L.emit(i.needUserData)}},{key:"showErrors",value:function(e){console.log("SHow Errors",e)}}])&&ue(t.prototype,n),a&&ue(t,a),e}();function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=ce(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=ge(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function me(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=me(e[o]))&&(r&&t[o]&&(n=ge(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==ce(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&fe.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function ge(e){var t=""+e,n=de.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var fe=Object.prototype.hasOwnProperty,de=/["&<>]/;function he(e){var t,s,a,r="",o={};try{var i={".//src/Views/PugTemplates/ProfileEditForm.pug":"include  BaseComponents/button\ninclude BaseComponents/pageTitle\ninclude BaseComponents/Text\ninclude BaseComponents/avatar\ninclude BaseComponents/classNames\n\n+pageTitle('Редактирование профиля')\n\nform(method='POST', enctype = 'multipart/form-data')\n    +text('Имя')\n    input(type='text', name='profile_firstName', value=locals.name, class=classNames.inputClass)\n    +text('Фамилия')\n    input(type='text', name='profile_lastName', value=locals.surname, class=classNames.inputClass)\n    +text('Аватар')\n    +avatar(locals.avatar)\n    input(type='file', placeholder='Выберете аватар', name='avatar', class=classNames.inputClass)\n    input(type='submit', value='Применить', class=classNames.inputClass)\n    +button('Назад','back')\n\n//export {template}","src/Views/PugTemplates/BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","src/Views/PugTemplates/BaseComponents/pageTitle.pug":"mixin pageTitle(text, className)\n    h1(class=className) #{text}","src/Views/PugTemplates/BaseComponents/Text.pug":"mixin text(text, name)\n    p(class='MainTitle', name=name) #{text}","src/Views/PugTemplates/BaseComponents/avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)","src/Views/PugTemplates/BaseComponents/classNames.pug":"- var classNames ={inputClass:'login-reg-input',formClass:'login-form',regButton:'reg-button',loginButton:'login-button', sendLetterButton:'send-button'}"};a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(pe("class",me([o],[!0]),!1,!1)+pe("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+ge(null==(t=e)?"":t)+"</button>"},a=1,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",o.pageTitle=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+"<h1"+pe("class",me([n],[!0]),!1,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+ge(null==(t=e)?"":t)+"</h1>"},a=1,s="src/Views/PugTemplates/BaseComponents/Text.pug",o.text=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+'<p class="MainTitle"'+pe("name",n,!0,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/Text.pug",r=r+ge(null==(t=e)?"":t)+"</p>"},a=1,s="src/Views/PugTemplates/BaseComponents/avatar.pug",o.avatar=t=function(e){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/avatar.pug",r=r+'<img width="70" height="70" id="avatar"'+pe("src",e,!0,!1)+"/>"},a=1,s="src/Views/PugTemplates/BaseComponents/classNames.pug";var u={inputClass:"login-reg-input",formClass:"login-form",regButton:"reg-button",loginButton:"login-button",sendLetterButton:"send-button"};a=7,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.pageTitle("Редактирование профиля"),a=9,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r+='<form method="POST" enctype="multipart/form-data">',a=10,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.text("Имя"),a=11,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r=r+"<input"+pe("class",me([u.inputClass],[!0]),!1,!1)+' type="text" name="profile_firstName"'+pe("value",e.name,!0,!1)+"/>",a=12,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.text("Фамилия"),a=13,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r=r+"<input"+pe("class",me([u.inputClass],[!0]),!1,!1)+' type="text" name="profile_lastName"'+pe("value",e.surname,!0,!1)+"/>",a=14,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.text("Аватар"),a=15,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.avatar(e.avatar),a=16,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r=r+"<input"+pe("class",me([u.inputClass],[!0]),!1,!1)+' type="file" placeholder="Выберете аватар" name="avatar"/>',a=17,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r=r+"<input"+pe("class",me([u.inputClass],[!0]),!1,!1)+' type="submit" value="Применить"/>',a=18,s=".//src/Views/PugTemplates/ProfileEditForm.pug",o.button("Назад","back"),r+="</form>",a=20,s=".//src/Views/PugTemplates/ProfileEditForm.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function be(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,L.on(g.profileEdit.fail,this.showErrors.bind(this))}var t,n,a;return t=e,(n=[{key:"render",value:function(e){this.element.innerHTML="",ie.render(e.navbar),this.element.insertAdjacentHTML("beforeend",he(e));var t=document.getElementsByTagName("form")[0],n=document.getElementsByName("back")[0];t.addEventListener("submit",(function(e){e.preventDefault(),L.emit(o.submit,{target:"ProfileEditView",data:new FormData(t)})})),n.addEventListener("click",(function(e){e.preventDefault(),L.emit(s.goBack)}))}},{key:"showErrors",value:function(e){console.log("PROFILE EDIT Errors",e)}}])&&be(t.prototype,n),a&&be(t,a),e}();function ye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var we=new(function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=n,L.on(g.profileEdit.success,(function(e){L.emit(s.redirect,{path:h,data:e})})),L.on(i.needUserData,(function(){a.view.render(a.model.user)}))}var t,n,a;return t=e,(n=[{key:"setView",value:function(e){this.view=e}},{key:"setModel",value:function(e){this.model=e}}])&&ye(t.prototype,n),a&&ye(t,a),e}());function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=Te(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=Pe(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function Ce(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=Ce(e[o]))&&(r&&t[o]&&(n=Pe(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==Te(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&Be.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function Pe(e){var t=""+e,n=Se.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var Be=Object.prototype.hasOwnProperty,Se=/["&<>]/;function xe(e){var t,s,a,r="",o={};try{var i={"mainPage.pug":"include BaseComponents/LetterList\ninclude BaseComponents/FolderList\ninclude BaseComponents/Letter\n\ndiv(class='folders')\n    +folders(locals.folderList)\n\ndiv(class='letterList')\n    +LetterList(locals.letterList)\n\ndiv(class='letter')\n    +Letter(locals.letter)\n\n//export {template}","BaseComponents/LetterList.pug":"include LetterPreview\nmixin LetterList(letters)\n    ul\n    each letter in letters\n        li\n            div(id=letter.Id)\n                - date = new Date(letter.DateTime * 1000)\n                p() Отправитель #{letter.Sender}\n                p() Получатель #{letter.Receiver}\n                p() Время  #{date.toLocaleTimeString()}  #{date.toLocaleDateString()}\n                p() Тема #{letter.Theme}","BaseComponents/LetterPreview.pug":"mixin LetterPreview(letter)\n    div(id=letter.id)\n        p() #{letter.sender}\n        p() #{letter.dateTime}\n        p() #{letter.theme}","BaseComponents/FolderList.pug":"include button\nmixin folders(data)\n    ul() Почтовый ящик\n        li()\n            +button('Входящие', 'got', '')\n        li()\n            +button('Отправленные', 'sended', '')\n//export { template };\n","BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","BaseComponents/Letter.pug":"mixin Letter(letter)\n    if(letter)\n        p Письмо\n        div(id=letter.Id)\n            - date = new Date(letter.DateTime * 1000)\n            p() Отправитель #{letter.Sender}\n            p() Получатель #{letter.Receiver}\n            p() Время  #{date.toLocaleTimeString()}  #{date.toLocaleDateString()}\n            p() Тема #{letter.Theme}\n            p() Текст #{letter.Text}"},u=e||{};(function(n,i){a=1,s="BaseComponents/LetterPreview.pug",a=2,s="BaseComponents/LetterList.pug",o.LetterList=t=function(e){this&&this.block,this&&this.attributes;a=3,s="BaseComponents/LetterList.pug",r+="<ul></ul>",a=4,s="BaseComponents/LetterList.pug",function(){var o=e;if("number"==typeof o.length)for(var u=0,l=o.length;u<l;u++){var c=o[u];a=5,s="BaseComponents/LetterList.pug",a=6,s="BaseComponents/LetterList.pug",r=(r+="<li>")+"<div"+Le("id",c.Id,!0,!1)+">",a=7,s="BaseComponents/LetterList.pug",i=new n(1e3*c.DateTime),a=8,s="BaseComponents/LetterList.pug",r+="<p>",a=8,s="BaseComponents/LetterList.pug",a=8,s="BaseComponents/LetterList.pug",r=(r+="Отправитель ")+Pe(null==(t=c.Sender)?"":t)+"</p>",a=9,s="BaseComponents/LetterList.pug",r+="<p>",a=9,s="BaseComponents/LetterList.pug",a=9,s="BaseComponents/LetterList.pug",r=(r+="Получатель ")+Pe(null==(t=c.Receiver)?"":t)+"</p>",a=10,s="BaseComponents/LetterList.pug",r+="<p>",a=10,s="BaseComponents/LetterList.pug",r+="Время  ",a=10,s="BaseComponents/LetterList.pug",r+=Pe(null==(t=i.toLocaleTimeString())?"":t),a=10,s="BaseComponents/LetterList.pug",a=10,s="BaseComponents/LetterList.pug",r=(r+="  ")+Pe(null==(t=i.toLocaleDateString())?"":t)+"</p>",a=11,s="BaseComponents/LetterList.pug",r+="<p>",a=11,s="BaseComponents/LetterList.pug",a=11,s="BaseComponents/LetterList.pug",r=(r+="Тема ")+Pe(null==(t=c.Theme)?"":t)+"</p></div></li>"}else{l=0;for(var u in o){l++;c=o[u];a=5,s="BaseComponents/LetterList.pug",a=6,s="BaseComponents/LetterList.pug",r=(r+="<li>")+"<div"+Le("id",c.Id,!0,!1)+">",a=7,s="BaseComponents/LetterList.pug",i=new n(1e3*c.DateTime),a=8,s="BaseComponents/LetterList.pug",r+="<p>",a=8,s="BaseComponents/LetterList.pug",a=8,s="BaseComponents/LetterList.pug",r=(r+="Отправитель ")+Pe(null==(t=c.Sender)?"":t)+"</p>",a=9,s="BaseComponents/LetterList.pug",r+="<p>",a=9,s="BaseComponents/LetterList.pug",a=9,s="BaseComponents/LetterList.pug",r=(r+="Получатель ")+Pe(null==(t=c.Receiver)?"":t)+"</p>",a=10,s="BaseComponents/LetterList.pug",r+="<p>",a=10,s="BaseComponents/LetterList.pug",r+="Время  ",a=10,s="BaseComponents/LetterList.pug",r+=Pe(null==(t=i.toLocaleTimeString())?"":t),a=10,s="BaseComponents/LetterList.pug",a=10,s="BaseComponents/LetterList.pug",r=(r+="  ")+Pe(null==(t=i.toLocaleDateString())?"":t)+"</p>",a=11,s="BaseComponents/LetterList.pug",r+="<p>",a=11,s="BaseComponents/LetterList.pug",a=11,s="BaseComponents/LetterList.pug",r=(r+="Тема ")+Pe(null==(t=c.Theme)?"":t)+"</p></div></li>"}}}.call(this)},a=1,s="BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="BaseComponents/button.pug",r=r+"<button"+(Le("class",Ce([o],[!0]),!1,!1)+Le("name",n,!0,!1))+">",a=2,s="BaseComponents/button.pug",r=r+Pe(null==(t=e)?"":t)+"</button>"},a=2,s="BaseComponents/FolderList.pug",o.folders=t=function(e){this&&this.block,this&&this.attributes;a=3,s="BaseComponents/FolderList.pug",r+="<ul>",a=3,s="BaseComponents/FolderList.pug",r+="Почтовый ящик",a=4,s="BaseComponents/FolderList.pug",r+="<li>",a=5,s="BaseComponents/FolderList.pug",o.button("Входящие","got",""),r+="</li>",a=6,s="BaseComponents/FolderList.pug",r+="<li>",a=7,s="BaseComponents/FolderList.pug",o.button("Отправленные","sended",""),r+="</li></ul>"},a=8,s="BaseComponents/FolderList.pug",r+="\x3c!--export { template };--\x3e",a=1,s="BaseComponents/Letter.pug",o.Letter=t=function(e){this&&this.block,this&&this.attributes;a=2,s="BaseComponents/Letter.pug",e&&(a=3,s="BaseComponents/Letter.pug",r+="<p>",a=3,s="BaseComponents/Letter.pug",a=4,s="BaseComponents/Letter.pug",r=(r+="Письмо</p>")+"<div"+Le("id",e.Id,!0,!1)+">",a=5,s="BaseComponents/Letter.pug",i=new n(1e3*e.DateTime),a=6,s="BaseComponents/Letter.pug",r+="<p>",a=6,s="BaseComponents/Letter.pug",a=6,s="BaseComponents/Letter.pug",r=(r+="Отправитель ")+Pe(null==(t=e.Sender)?"":t)+"</p>",a=7,s="BaseComponents/Letter.pug",r+="<p>",a=7,s="BaseComponents/Letter.pug",a=7,s="BaseComponents/Letter.pug",r=(r+="Получатель ")+Pe(null==(t=e.Receiver)?"":t)+"</p>",a=8,s="BaseComponents/Letter.pug",r+="<p>",a=8,s="BaseComponents/Letter.pug",r+="Время  ",a=8,s="BaseComponents/Letter.pug",r+=Pe(null==(t=i.toLocaleTimeString())?"":t),a=8,s="BaseComponents/Letter.pug",a=8,s="BaseComponents/Letter.pug",r=(r+="  ")+Pe(null==(t=i.toLocaleDateString())?"":t)+"</p>",a=9,s="BaseComponents/Letter.pug",r+="<p>",a=9,s="BaseComponents/Letter.pug",a=9,s="BaseComponents/Letter.pug",r=(r+="Тема ")+Pe(null==(t=e.Theme)?"":t)+"</p>",a=10,s="BaseComponents/Letter.pug",r+="<p>",a=10,s="BaseComponents/Letter.pug",a=10,s="BaseComponents/Letter.pug",r=(r+="Текст ")+Pe(null==(t=e.Text)?"":t)+"</p></div>")},a=5,s="mainPage.pug",r+='<div class="folders">',a=6,s="mainPage.pug",o.folders(e.folderList),r+="</div>",a=8,s="mainPage.pug",r+='<div class="letterList">',a=9,s="mainPage.pug",o.LetterList(e.letterList),r+="</div>",a=11,s="mainPage.pug",r+='<div class="letter">',a=12,s="mainPage.pug",o.Letter(e.letter),r+="</div>",a=14,s="mainPage.pug",r+="\x3c!--export {template}--\x3e"}).call(this,"Date"in u?u.Date:"undefined"!=typeof Date?Date:void 0,"date"in u?u.date:"undefined"!=typeof date?date:void 0)}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function Ee(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var Ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,s;return t=e,(n=[{key:"render",value:function(e){console.log("RENDER MAIN PAGE DATA, dat",e),e&&e.letterList&&e.folderList?(this.element.innerHTML="",ie.render(),this.element.insertAdjacentHTML("beforeend",xe(e)),document.getElementsByClassName("letterList")[0].addEventListener("click",(function(e){console.log("CLICK LETTER",e.target.tagName,e.target,"DIV ID",e.target.parentNode.id),"DIV"!==e.target.tagName&&L.emit(u.selectLetter,e.target.parentNode.id)}))):L.emit(u.needData)}}])&&Ee(t.prototype,n),s&&Ee(t,s),e}();function ke(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var Ne=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainPageView=t,this.data={},L.on(m.getLetter.success,(function(e){n.data.letter=e})),L.on(m.getLetterList.success,(function(e){n.data.letterList=e})),L.on(m.getFolderList.success,(function(e){n.data.folderList=e})),L.on(u.needData,(function(){n.mainPageView.render(n.data)})),L.on(u.selectLetter,(function(e){n.mainPageView.render(n.data)})),L.on(m.sendLetter.success,(function(){L.emit(s.redirect,{path:v})}))}var t,n,a;return t=e,(n=[{key:"_allDataIsReady",value:function(){this.data.folderList&&this.data.letterList&&console.log("ALL DATA IS READY")}}])&&ke(t.prototype,n),a&&ke(t,a),e}();function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t,n,s){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(s?e:e+'="'+e+'"');var a=Ae(t);return"object"!==a&&"function"!==a||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=De(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function Fe(e,t){return Array.isArray(e)?function(e,t){for(var n,s="",a="",r=Array.isArray(t),o=0;o<e.length;o++)(n=Fe(e[o]))&&(r&&t[o]&&(n=De(n)),s=s+a+n,a=" ");return s}(e,t):e&&"object"==Ae(e)?function(e){var t="",n="";for(var s in e)s&&e[s]&&Ue.call(e,s)&&(t=t+n+s,n=" ");return t}(e):e||""}function De(e){var t=""+e,n=Ie.exec(t);if(!n)return e;var s,a,r,o="";for(s=n.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=r}return a!==s?o+t.substring(a,s):o}var Ue=Object.prototype.hasOwnProperty,Ie=/["&<>]/;function Me(e){var t,s,a,r="",o={};try{var i={".//src/Views/PugTemplates/SendLetterForm.pug":"include BaseComponents/classNames\ninclude BaseComponents/pageTitle\ninclude  BaseComponents/button\n\n+pageTitle('Отправить письмо')\n\nform(method='POST', name='sendLetterForm' class=classNames.formClass)\n    p(class='InputTitle') Получатель\n    input(type='text', name='to', class=classNames.inputClass)\n    p(class='InputTitle') Тема\n    input(type='text', name='theme', class=classNames.inputClass)\n    p(class='InputTitle') Текст\n    input(type='text', name='text', class=classNames.inputClass)\n    input(type='submit', value='Отправить письмо', class='submit', class=classNames.inputClass)\n    +button('Назад', 'back', classNames.regButton)\n\n//export { template };","src/Views/PugTemplates/BaseComponents/classNames.pug":"- var classNames ={inputClass:'login-reg-input',formClass:'login-form',regButton:'reg-button',loginButton:'login-button', sendLetterButton:'send-button'}","src/Views/PugTemplates/BaseComponents/pageTitle.pug":"mixin pageTitle(text, className)\n    h1(class=className) #{text}","src/Views/PugTemplates/BaseComponents/button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}"};a=1,s="src/Views/PugTemplates/BaseComponents/classNames.pug";var u={inputClass:"login-reg-input",formClass:"login-form",regButton:"reg-button",loginButton:"login-button",sendLetterButton:"send-button"};a=1,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",o.pageTitle=t=function(e,n){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+"<h1"+Oe("class",Fe([n],[!0]),!1,!1)+">",a=2,s="src/Views/PugTemplates/BaseComponents/pageTitle.pug",r=r+De(null==(t=e)?"":t)+"</h1>"},a=1,s="src/Views/PugTemplates/BaseComponents/button.pug",o.button=t=function(e,n,o){this&&this.block,this&&this.attributes;a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+"<button"+(Oe("class",Fe([o],[!0]),!1,!1)+Oe("name",n,!0,!1))+">",a=2,s="src/Views/PugTemplates/BaseComponents/button.pug",r=r+De(null==(t=e)?"":t)+"</button>"},a=5,s=".//src/Views/PugTemplates/SendLetterForm.pug",o.pageTitle("Отправить письмо"),a=7,s=".//src/Views/PugTemplates/SendLetterForm.pug",r=r+"<form"+Oe("class",Fe([u.formClass],[!0]),!1,!1)+' method="POST" name="sendLetterForm">',a=8,s=".//src/Views/PugTemplates/SendLetterForm.pug",r+='<p class="InputTitle">',a=8,s=".//src/Views/PugTemplates/SendLetterForm.pug",a=9,s=".//src/Views/PugTemplates/SendLetterForm.pug",r=(r+="Получатель</p>")+"<input"+Oe("class",Fe([u.inputClass],[!0]),!1,!1)+' type="text" name="to"/>',a=10,s=".//src/Views/PugTemplates/SendLetterForm.pug",r+='<p class="InputTitle">',a=10,s=".//src/Views/PugTemplates/SendLetterForm.pug",a=11,s=".//src/Views/PugTemplates/SendLetterForm.pug",r=(r+="Тема</p>")+"<input"+Oe("class",Fe([u.inputClass],[!0]),!1,!1)+' type="text" name="theme"/>',a=12,s=".//src/Views/PugTemplates/SendLetterForm.pug",r+='<p class="InputTitle">',a=12,s=".//src/Views/PugTemplates/SendLetterForm.pug",a=13,s=".//src/Views/PugTemplates/SendLetterForm.pug",r=(r+="Текст</p>")+"<input"+Oe("class",Fe([u.inputClass],[!0]),!1,!1)+' type="text" name="text"/>',a=14,s=".//src/Views/PugTemplates/SendLetterForm.pug",r=r+"<input"+Oe("class",Fe(["submit",u.inputClass],[!1,!0]),!1,!1)+' type="submit" value="Отправить письмо"/>',a=15,s=".//src/Views/PugTemplates/SendLetterForm.pug",o.button("Назад","back",u.regButton),r+="</form>",a=17,s=".//src/Views/PugTemplates/SendLetterForm.pug",r+="\x3c!--export { template };--\x3e"}catch(e){!function e(t,s,a,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&s||r))throw t.message+=" on line "+a,t;try{r=r||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(s,"utf8")}catch(s){e(t,null,a)}var o=3,i=r.split("\n"),u=Math.max(a-o,0),l=Math.min(i.length,a+o);throw o=i.slice(u,l).map((function(e,t){var n=t+u+1;return(n==a?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=s,t.message=(s||"Pug")+":"+a+"\n"+o+"\n\n"+t.message,t}(e,s,a,i[s])}return r}function je(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var _e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,s;return t=e,(n=[{key:"render",value:function(e){e=e||{},console.log("SEND LETTER VIEW RENDER"),this.element.innerHTML="",ie.render(e.navbar),this.element.insertAdjacentHTML("beforeend",Me());var t=document.getElementsByName("sendLetterForm")[0];t.addEventListener("submit",(function(e){e.preventDefault(),L.emit(c.sendLetter,new FormData(t))}))}}])&&je(t.prototype,n),s&&je(t,s),e}();function Re(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var Ge=new(function(){function e(t,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L.on(p.needData,(function(){s.navbarView.render({avatar:s.userModel.user.avatar})}))}var t,n,s;return t=e,(n=[{key:"setNavbarView",value:function(e){this.navbarView=e}},{key:"setUserModel",value:function(e){this.userModel=e}}])&&Re(t.prototype,n),s&&Re(t,s),e}());function He(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var Je=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L.on(i.needUserData,(function(){t.profileView.render(t.model.user)}))}var t,n,s;return t=e,(n=[{key:"setView",value:function(e){this.profileView=e}},{key:"setModel",value:function(e){this.model=e}}])&&He(t.prototype,n),s&&He(t,s),e}()),qe=new P,ze=new O(document.body),Ke=new G(document.body),We=new le(document.body),Ye=new ve(document.body),Ze=new Ve(document.body),$e=new _e(document.body);z.setUrl("http://localhost:8080");var Qe=new W("http://localhost:8080");new function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.signInView=t,this.model=n,L.on(g.signIn.success,(function(e){L.emit(s.redirect,{path:v})}))}(ze,z),new function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.signInView=t,this.model=n,L.on(g.signUp.success,(function(e){console.log({path:h,data:e}),L.emit(s.redirect,{path:v,data:e})}))}(Ke,z),new Ne(Ze);Ge.setNavbarView(ie),Ge.setUserModel(z),we.setView(Ye),we.setModel(z),Je.setView(We),Je.setModel(z),qe.register(f,ze),qe.register(d,Ke),qe.register(h,We),qe.register(b,Ye),qe.register(v,Ze),qe.register(y,$e),console.log(location.pathname),z.getUserData(),L.on(g.profileGetData.success,(function e(){console.log("h1"),L.off(g.profileGetData.success,e),Qe.getFolders()})),L.on(m.getFolderList.success,(function e(){console.log("h2"),L.off(m.getFolderList.success,e),Qe.getLetterList()})),L.on(m.getLetterList.success,(function e(){console.log("h3"),L.off(m.getLetterList.success,e);try{qe.start(location.pathname)}catch(e){console.log("CATCH PATH, err",e),qe.start(f)}})),L.on(g.profileGetData.fail,(function e(){L.off(g.profileGetData.fail,e),console.log("h4"),L.emit(s.redirect,f)}))}]);
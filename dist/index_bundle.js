!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var a={goBack:"goBack",redirect:"redirect",logout:"logout"},r={submit:"SignIn-submit",errors:"SignIn-errors"},s={submit:"SignUp-submit",errors:"SignUp-errors"},i={submit:"ProfileEdit-submit",errors:"ProfileEdit-errors",needUserData:"ProfileEditView-needUserData"},l={needUserData:"ProfileView-needUserData"},o={needData:"mainPageView-needData",selectLetter:"mainPageView-selectLetter",selectFolder:"mainPageView-selectFolder"},u={needGetFolderList:"mainPageController-needGetFolderList",needGetLetterList:"mainPageController-needGetLetterList",needGetLetter:"mainPageController-needGetLetter"},c={sendLetter:"sendLetterView-sendLetter"},p={needData:"navbar-needData"},m={getLetter:{success:"letterModelEvents-getLetter-success",fail:"letterModelEvents-getLetter-fail"},getLetterList:{success:"letterModelEvents-getLetterList-success",fail:"letterModelEvents-getLetterList-fail"},getFolderList:{success:"letterModelEvents-getFolderList-success",fail:"letterModelEvents-getFolderList-fail"},sendLetter:{success:"letterModelEvents-sendLetter-success",fail:"letterModelEvents-sendLetter-fail"}},g={signIn:{success:"UserModel-authorizationSuccess",fail:"UserModel-authorizationFail"},signUp:{success:"UserModel-signupSuccess",fail:"UserModel-signupFail"},profileEdit:{success:"UserModel-profileEditSuccess",fail:"UserModel-profileEditFail"},profileGetData:{success:"profile-successGetData",fail:"fail-getData"}},d="http://localhost:8080",f="/signin",b="/signup",v="/profile",h="/profileEdit",P="/letters",y="/sendLetter",w="/logout",S="/sendMessage",L="/getAvatar",x="/getRecvLetters",E="/getSendLetters";function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var F=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"on",value:function(e,t){return this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t),this}},{key:"off",value:function(e,t){var n,a=null===(n=this._eventHandlers)||void 0===n?void 0:n[e].filter((function(e){return e!==t}));this._eventHandlers[e]=a}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];console.log("EMIT",e,n),this._eventHandlers&&this._eventHandlers[e]&&this._eventHandlers[e].forEach((function(e){return e.apply(void 0,n)}))}}])&&T(t.prototype,n),a&&T(t,a),e}());function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var N=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registeredPathes={},window.onpopstate=function(e){e.preventDefault(),document.referrer=window.location.href,console.log("HISTORY EVENT",e);try{t.registeredPathes[e.state.path].render(e.state.data)}catch(e){window.location=window.location.href}},F.on(a.redirect,this.go.bind(this)),F.on(a.goBack,this.back.bind(this))}var t,n,r;return t=e,(n=[{key:"register",value:function(e,t){this.registeredPathes[e]=t}},{key:"start",value:function(e,t){console.log("START PATH",e,"PREV PAGE",document.referrer),window.history.pushState({path:e,data:t||1},"Start",e),this.registeredPathes[e].render(t)}},{key:"go",value:function(e){console.log("GOOO",e),e&&(this.registeredPathes[e.path].render(e.data||0),window.history.pushState({path:e.path,data:e.data||0},e.path,e.path))}},{key:"back",value:function(){console.log("I'L BE BACK"),window.history.back(),console.log("href",window.location.pathname),this.registeredPathes[window.location.pathname].render()}}])&&k(t.prototype,n),r&&k(t,r),e}();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=I(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=U.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var U=/["&<>]/;function A(e){var t,a,r="";try{var s={"./src/Views/PugTemplates/SignInForm.pug":'div(class="SignInPage")\n    form(class="SignInForm")\n        label(class="label-form") Вход\n        div(class="group")\n            input(class="Input" type="text" name=\'email\' required)\n            span(class="bar")\n            label(class="label-input") Email\n\n        div(class="group")\n            input(class="Input" type="text" name=\'password\' required)\n            span(class="bar")\n            label(class="label-input") Password\n        div(class="row__item buttons-SignInForm AcceptBackButtonForm")\n            button(class="Button Button-state-passive" name="signup") Зарегистрироваться\n            button(class="Button Button-state-accept" type="submit" name="submit") Войти\n\n//export {template}'};a=1,t="./src/Views/PugTemplates/SignInForm.pug",r+='<div class="SignInPage">',a=2,t="./src/Views/PugTemplates/SignInForm.pug",r+='<form class="SignInForm">',a=3,t="./src/Views/PugTemplates/SignInForm.pug",r+='<label class="label-form">',a=3,t="./src/Views/PugTemplates/SignInForm.pug",r+="Вход</label>",a=4,t="./src/Views/PugTemplates/SignInForm.pug",a=5,t="./src/Views/PugTemplates/SignInForm.pug",r=(r+='<div class="group">')+'<input class="Input" type="text" name="email"'+B("required",!0,!0,!1)+"/>",a=6,t="./src/Views/PugTemplates/SignInForm.pug",r+='<span class="bar"></span>',a=7,t="./src/Views/PugTemplates/SignInForm.pug",r+='<label class="label-input">',a=7,t="./src/Views/PugTemplates/SignInForm.pug",r+="Email</label></div>",a=9,t="./src/Views/PugTemplates/SignInForm.pug",a=10,t="./src/Views/PugTemplates/SignInForm.pug",r=(r+='<div class="group">')+'<input class="Input" type="text" name="password"'+B("required",!0,!0,!1)+"/>",a=11,t="./src/Views/PugTemplates/SignInForm.pug",r+='<span class="bar"></span>',a=12,t="./src/Views/PugTemplates/SignInForm.pug",r+='<label class="label-input">',a=12,t="./src/Views/PugTemplates/SignInForm.pug",r+="Password</label></div>",a=13,t="./src/Views/PugTemplates/SignInForm.pug",r+='<div class="row__item buttons-SignInForm AcceptBackButtonForm">',a=14,t="./src/Views/PugTemplates/SignInForm.pug",r+='<button class="Button Button-state-passive" name="signup">',a=14,t="./src/Views/PugTemplates/SignInForm.pug",r+="Зарегистрироваться</button>",a=15,t="./src/Views/PugTemplates/SignInForm.pug",r+='<button class="Button Button-state-accept" type="submit" name="submit">',a=15,t="./src/Views/PugTemplates/SignInForm.pug",r+="Войти</button></div></form></div>",a=17,t="./src/Views/PugTemplates/SignInForm.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,t,a,s[t])}return r}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,F.on(g.signIn.fail,e.showErrors.bind(this))}var t,n,s;return t=e,s=[{key:"showErrors",value:function(e){console.log("SIGN IN ERRORS SHOW",e.errors);var t=document.getElementsByName("password")[0],n=document.getElementsByName("email")[0];console.log(e.password),e.password&&(t.value="",t.placeholder=e.password),e.email&&(n.value="",n.placeholder=e.email)}}],(n=[{key:"render",value:function(){this.element.innerHTML=A();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("signup")[0];e.addEventListener("submit",(function(t){console.log("FORM SUBMIT"),t.preventDefault();var n=new FormData(e);F.emit(r.submit,{target:"SignInView",data:n})})),t.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.redirect,{path:b})}))}}])&&O(t.prototype,n),s&&O(t,s),e}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=D(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=_.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var _=/["&<>]/;function M(e){var t,a,r="";try{var s={"./src/Views/PugTemplates/SignUpForm.pug":'div(class="SignUpPage")\n    form(class="SignUpForm")\n        label(class="label-form") Регистрация\n\n        div(class="group")\n            input(class="Input" name=\'email\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Email\n\n        div(class="group")\n            input(class="Input" name=\'password1\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Пароль\n\n        div(class="group")\n            input(class="Input" name=\'password2\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Повторите пароль\n\n        div(class="group")\n            input(class="Input" name=\'name\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Имя\n\n        div(class="group")\n            input(class="Input" name=\'surname\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Фамилия\n\n        div(class="input-file")\n            div(class="form-group")\n                input(type="file" name="avatar" id="file" class="input-file")\n                label(for="file" class="btn btn-tertiary js-labelFile")\n                    span(class="js-fileName") Загрузить аватар\n\n        div(class="row__item buttons-SignInForm AcceptBackButtonForm")\n            button(class="Button Button-state-passive" name="back") Войти\n            button(class="Button Button-state-accept" type="submit" name="submit") Зарегистрироваться\n\n//export {template}\n'};a=1,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<div class="SignUpPage">',a=2,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<form class="SignUpForm">',a=3,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-form">',a=3,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Регистрация</label>",a=5,t="./src/Views/PugTemplates/SignUpForm.pug",a=6,t="./src/Views/PugTemplates/SignUpForm.pug",r=(r+='<div class="group">')+'<input class="Input" name="email" type="text"'+V("required",!0,!0,!1)+"/>",a=7,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="bar"></span>',a=8,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-input">',a=8,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Email</label></div>",a=10,t="./src/Views/PugTemplates/SignUpForm.pug",a=11,t="./src/Views/PugTemplates/SignUpForm.pug",r=(r+='<div class="group">')+'<input class="Input" name="password1" type="text"'+V("required",!0,!0,!1)+"/>",a=12,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="bar"></span>',a=13,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-input">',a=13,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Пароль</label></div>",a=15,t="./src/Views/PugTemplates/SignUpForm.pug",a=16,t="./src/Views/PugTemplates/SignUpForm.pug",r=(r+='<div class="group">')+'<input class="Input" name="password2" type="text"'+V("required",!0,!0,!1)+"/>",a=17,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="bar"></span>',a=18,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-input">',a=18,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Повторите пароль</label></div>",a=20,t="./src/Views/PugTemplates/SignUpForm.pug",a=21,t="./src/Views/PugTemplates/SignUpForm.pug",r=(r+='<div class="group">')+'<input class="Input" name="name" type="text"'+V("required",!0,!0,!1)+"/>",a=22,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="bar"></span>',a=23,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-input">',a=23,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Имя</label></div>",a=25,t="./src/Views/PugTemplates/SignUpForm.pug",a=26,t="./src/Views/PugTemplates/SignUpForm.pug",r=(r+='<div class="group">')+'<input class="Input" name="surname" type="text"'+V("required",!0,!0,!1)+"/>",a=27,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="bar"></span>',a=28,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="label-input">',a=28,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Фамилия</label></div>",a=30,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<div class="input-file">',a=31,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<div class="form-group">',a=32,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<input class="input-file" type="file" name="avatar" id="file"/>',a=33,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<label class="btn btn-tertiary js-labelFile" for="file">',a=34,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<span class="js-fileName">',a=34,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Загрузить аватар</span></label></div></div>",a=36,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<div class="row__item buttons-SignInForm AcceptBackButtonForm">',a=37,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<button class="Button Button-state-passive" name="back">',a=37,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Войти</button>",a=38,t="./src/Views/PugTemplates/SignUpForm.pug",r+='<button class="Button Button-state-accept" type="submit" name="submit">',a=38,t="./src/Views/PugTemplates/SignUpForm.pug",r+="Зарегистрироваться</button></div></form></div>",a=40,t="./src/Views/PugTemplates/SignUpForm.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,t,a,s[t])}return r}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,F.on(g.signUp.fail,e.showErrors.bind(this))}var t,n,r;return t=e,r=[{key:"showErrors",value:function(e){console.log("SIGN UP ERRORS SHOW",e);var t=document.getElementsByName("email")[0],n=document.getElementsByName("password1")[0],a=document.getElementsByName("password2")[0],r=document.getElementsByName("name")[0],s=document.getElementsByName("surname")[0];e.password1?(n.value="",n.placeholder=e.password1):e.password2&&(a.value="",a.placeholder=e.password2),e.email&&(t.value="",t.placeholder=e.email),e.name&&(r.value="",r.placeholder=e.name),e.surname&&(s.value="",s.placeholder=e.surname)}}],(n=[{key:"render",value:function(){this.element.innerHTML=M();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("back")[0];e.addEventListener("submit",(function(t){t.preventDefault(),F.emit(s.submit,{target:"SignUpView",data:new FormData(e)})})),t.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.redirect,{path:f})}))}}])&&R(t.prototype,n),r&&R(t,r),e}();function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"_checkEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"_checkName",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkSurname",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkPassword",value:function(e){return e.length>3}},{key:"_checkPasswordEqual",value:function(e,t){return e===t}},{key:"checkSignInForm",value:function(t){var n={};return e._checkEmail(t.get("email"))||(n.email="Некорректный email"),e._checkPassword(t.get("password"))||(n.password="слишком короткий пароль"),n}},{key:"checkSignUpForm",value:function(t){console.log("VALIDATOR SIGN UP",t.get("email"),t.get("password1"),t.get("password2"),t.get("name"),t.get("surname"));var n={};return e._checkEmail(t.get("email"))||(n.email="Некорректный email"),e._checkPassword(t.get("password1"))?e._checkPasswordEqual(t.get("password1"),t.get("password2"))||(n.password2="Пароли не совпадают"):n.password1="слишком короткий пароль",e._checkName(t.get("name"))||(n.name="Некорректное имя"),e._checkSurname(t.get("surname"))||(n.surname="Некорректная фамилия"),n}},{key:"checkLetterForm",value:function(t){console.log("VALIDATOR SEND LETTER",t.get("to"),t.get("theme"),t.get("text"));var n={};return e._checkEmail(t.get("to"))||(n.to="Некорректный email получателя"),e._checkName(t.get("theme"))||(n.theme="Не корректная тема сообщения"),e._checkName(t.get("text"))||(n.text="Не корректная текст сообщения"),n}}],(n=null)&&G(t.prototype,n),a&&G(t,a),e}();function q(e,t,n){return fetch(d+e,{method:t,mode:"cors",credentials:"include",body:n})}function J(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var W=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.user={},F.on(r.submit,this.signIn.bind(this)),F.on(s.submit,this.signUp.bind(this)),F.on(i.submit,this.editUser.bind(this)),F.on(l.needUserData,this.getUserData.bind(this)),F.on(a.logout,this.logout.bind(this))}var t,n,o;return t=e,(n=[{key:"setUrl",value:function(e){this.baseUrl=e}},{key:"signIn",value:function(e){var t=this;console.log("SIGN IN");var n=H.checkSignInForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN IN ",n),void F.emit(g.signIn.fail,n);console.log("SIGN IN ",e,this.baseUrl+f),q(f,"POST",e.data).then((function(e){return e.json()})).then((function(e){200===e.Code?(F.on(g.profileGetData.success,(function e(){F.off(g.profileGetData.success,e),F.emit(g.signIn.success)})),t.getUserData()):401===e.Code?F.emit(g.signIn.fail,{password:e.Description}):404===e.Code?F.emit(g.signIn.fail,{email:e.Description}):F.emit(g.signIn.fail,{unknowError:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"signUp",value:function(e){var t=this,n=H.checkSignUpForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN UP ",n),void F.emit(g.signUp.fail,n);q(b,"POST",e.data).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?(F.on(g.profileGetData.success,(function e(){F.off(g.profileGetData.success,e),F.emit(g.signUp.success)})),t.getUserData()):F.emit(g.signUp.fail,{email:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"editUser",value:function(e){var t=this;q(v,"POST",e.data).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?(t.getUserData(g.profileEdit),F.on(g.profileGetData.success,(function e(){F.off(g.profileGetData.success,e),F.emit(g.profileEdit.success)}))):F.emit(g.profileEdit.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getUserData",value:function(){var e=this,t=q(v,"GET").then((function(e){return e.json()})).then((function(t){if(console.log("RESP GET USER DATA",t.status,t),200!==t.Code)throw new Error(t.Description);e.user.name=t.User.Name,e.user.email=t.User.Email,e.user.surname=t.User.Surname,e.user.avatar=""})),n=q(L,"GET").then((function(e){return e.blob()})).then((function(t){console.log("BLOB",t),e.user.avatar=URL.createObjectURL(t)}));Promise.all([t,n]).then((function(){console.log("УСПЕХ"),console.log("USER",e.user),F.emit(g.profileGetData.success,e.user)}),(function(e){F.emit(g.profileGetData.fail,{errors:e.message})}))}},{key:"logout",value:function(){console.log("LOGOUT"),F.emit(a.redirect,{path:f}),this.user={},fetch(this.baseUrl+w,{method:"POST",mode:"cors",credentials:"include"})}}])&&J(t.prototype,n),o&&J(t,o),e}())("http://localhost:8080");function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Letters=new Map,this.folders={},F.on(u.needGetLetter,this.getLetter.bind(this)),F.on(u.needGetLetterList,this.getLetterList.bind(this)),F.on(u.needGetFolderList,e.getFolders.bind(this)),F.on(c.sendLetter,e.sendLetter.bind(this)),F.on(a.logout,this.logout.bind(this))}var t,n,r;return t=e,r=[{key:"sendLetter",value:function(e){var t=H.checkLetterForm(e);if(0!==Object.keys(t).length)return console.log("ERRORS IN SEND LETTER ",t),void F.emit(m.sendLetter.fail,t);q(S,"POST",e).then((function(e){return e.json()})).then((function(e){console.log("RESP SEND LETTER",e),200===e.Code?(console.log("SUCCES SEND LETTER"),F.emit(m.sendLetter.success)):F.emit(m.sendLetter.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getFolders",value:function(){F.emit(m.getFolderList.success,["Входящие","Исходящие"])}}],(n=[{key:"getLetter",value:function(e){F.emit(m.getLetter.success,this.Letters[e])}},{key:"getLetterList",value:function(e){var t=this;console.log("GET LETTER LIST FOLDER ",e),q("Входящие"===e?x:E,"POST").then((function(e){return e.json()})).then((function(e){console.log("RESP GET LETTER LIST",e),200===e.Code?(console.log("SUCCES GET LETTER LETTER LIST"),t.Letters=new Map,e.Letters&&(e.Letters.forEach((function(e){t.Letters[e.Id]=e})),t.Letters.forEach((function(e){console.log("LETTTER",e)}))),F.emit(m.getLetterList.success,t.Letters)):F.emit(m.getLetterList.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e),F.emit(m.getLetterList.fail,{error:e})}))}},{key:"logout",value:function(){this.Letters=new Map,this.folders={}}}])&&z(t.prototype,n),r&&z(t,r),e}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e){var t=""+e,n=$.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}var $=/["&<>]/;function Q(e){var t,a,r,s="";try{var i={"ProfilePage.pug":'//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Профиль\')\n//\n////div\n////    +text(locals.name + \' \' + locals.surname, \'profile_name\')\n////    +text(\'Email: \' + locals.email)\n////    +text(\'Аватар\')\n////    +avatar(locals.avatar)\n////    +button(\'Редактировать\', name = \'editButton\')\n////    +button(\'Назад\' ,name=\'back\')\n\ndiv(class="Page-profile")\n    form(class="form-profile-view ")\n        img(src=locals.avatar class="img-Profile")\n        h3(class="row__item nameTitle-Profile") Имя\n        h3(class="row__item name-Profile") #{locals.name}\n        h3(class="row__item surnameTitle-Profile") Фамилия\n        h3(class="row__item surname-Profile") #{locals.surname}\n        h3(class="row__item emailTitle-Profile") Email\n        h3(class="row__item email-Profile") #{locals.email}\n        button(class="Button button-back Button-state-passive" name="back") Назад\n        button(class="Button button-edit Button-state-accept" name="editButton") Редактировать\n\n//export {template}'};r=1,a="ProfilePage.pug",s+="\x3c!--include  BaseComponents/button--\x3e",r=2,a="ProfilePage.pug",s+="\x3c!--include BaseComponents/pageTitle--\x3e",r=3,a="ProfilePage.pug",s+="\x3c!--include BaseComponents/Text--\x3e",r=4,a="ProfilePage.pug",s+="\x3c!--include BaseComponents/avatar--\x3e",r=5,a="ProfilePage.pug",s+="\x3c!--include BaseComponents/classNames--\x3e",r=6,a="ProfilePage.pug",s+="\x3c!----\x3e",r=7,a="ProfilePage.pug",s+="\x3c!--+pageTitle('Профиль')--\x3e",r=8,a="ProfilePage.pug",s+="\x3c!----\x3e",r=9,a="ProfilePage.pug",s+="\x3c!--//div--\x3e",r=10,a="ProfilePage.pug",s+="\x3c!--//    +text(locals.name + ' ' + locals.surname, 'profile_name')--\x3e",r=11,a="ProfilePage.pug",s+="\x3c!--//    +text('Email: ' + locals.email)--\x3e",r=12,a="ProfilePage.pug",s+="\x3c!--//    +text('Аватар')--\x3e",r=13,a="ProfilePage.pug",s+="\x3c!--//    +avatar(locals.avatar)--\x3e",r=14,a="ProfilePage.pug",s+="\x3c!--//    +button('Редактировать', name = 'editButton')--\x3e",r=15,a="ProfilePage.pug",s+="\x3c!--//    +button('Назад' ,name='back')--\x3e",r=17,a="ProfilePage.pug",s+='<div class="Page-profile">',r=18,a="ProfilePage.pug",r=19,a="ProfilePage.pug",s=(s+='<form class="form-profile-view ">')+'<img class="img-Profile"'+function(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=Z(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=Y(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}("src",e.avatar,!0,!1)+"/>",r=20,a="ProfilePage.pug",s+='<h3 class="row__item nameTitle-Profile">',r=20,a="ProfilePage.pug",s+="Имя</h3>",r=21,a="ProfilePage.pug",r=21,a="ProfilePage.pug",s=(s+='<h3 class="row__item name-Profile">')+Y(null==(t=e.name)?"":t)+"</h3>",r=22,a="ProfilePage.pug",s+='<h3 class="row__item surnameTitle-Profile">',r=22,a="ProfilePage.pug",s+="Фамилия</h3>",r=23,a="ProfilePage.pug",r=23,a="ProfilePage.pug",s=(s+='<h3 class="row__item surname-Profile">')+Y(null==(t=e.surname)?"":t)+"</h3>",r=24,a="ProfilePage.pug",s+='<h3 class="row__item emailTitle-Profile">',r=24,a="ProfilePage.pug",s+="Email</h3>",r=25,a="ProfilePage.pug",r=25,a="ProfilePage.pug",s=(s+='<h3 class="row__item email-Profile">')+Y(null==(t=e.email)?"":t)+"</h3>",r=26,a="ProfilePage.pug",s+='<button class="Button button-back Button-state-passive" name="back">',r=26,a="ProfilePage.pug",s+="Назад</button>",r=27,a="ProfilePage.pug",s+='<button class="Button button-edit Button-state-accept" name="editButton">',r=27,a="ProfilePage.pug",s+="Редактировать</button></form></div>",r=29,a="ProfilePage.pug",s+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,a,r,i[a])}return s}Object.prototype.hasOwnProperty;function X(e){var t,a,r="";try{var s={"navbar.pug":'include button\ninclude avatar\n\ndiv(class="navbar-main")\n    div(class="navbar ")\n        //+avatar(locals.avatar)\n        label(name = \'navbar-letters\' class="label logo-navbar") LOGO\n        button(name = \'navbar-send\' class="Button send-navbar button-send-navbar") Написать\n        button(name = \'navbar-profile\' class="Button-state-accept profile-navbar") Профиль\n        button(name = \'navbar-exit\' class="Button-state-passive exit-navbar") Выйти\n\n//export {template}\n',"button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)"};a=1,t="button.pug",a=1,t="avatar.pug",a=4,t="navbar.pug",r+='<div class="navbar-main">',a=5,t="navbar.pug",r+='<div class="navbar ">',a=6,t="navbar.pug",r+="\x3c!--+avatar(locals.avatar)--\x3e",a=7,t="navbar.pug",r+='<label class="label logo-navbar" name="navbar-letters">',a=7,t="navbar.pug",r+="LOGO</label>",a=8,t="navbar.pug",r+='<button class="Button send-navbar button-send-navbar" name="navbar-send">',a=8,t="navbar.pug",r+="Написать</button>",a=9,t="navbar.pug",r+='<button class="Button-state-accept profile-navbar" name="navbar-profile">',a=9,t="navbar.pug",r+="Профиль</button>",a=10,t="navbar.pug",r+='<button class="Button-state-passive exit-navbar" name="navbar-exit">',a=10,t="navbar.pug",r+="Выйти</button></div></div>",a=12,t="navbar.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,t,a,s[t])}return r}function ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var te=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.body}var t,n,r;return t=e,r=[{key:"hide",value:function(){document.getElementById("navbar").innerHTML=""}}],(n=[{key:"render",value:function(e){if(e){this.element.innerHTML="",console.log("NAVBAR VIEW RENDER",e);var t=document.getElementById("navbar")||document.createElement("div");t.id="navbar",t.innerHTML=X(),this.element.insertAdjacentHTML("beforeend",t.innerHTML);var n=document.getElementsByName("navbar-send")[0],r=document.getElementsByName("navbar-profile")[0],s=document.getElementsByName("navbar-exit")[0],i=document.getElementsByName("navbar-letters")[0];n.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.redirect,{path:y})})),r.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.redirect,{path:v})})),s.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.logout)})),i.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.redirect,{path:P})}))}else F.emit(p.needData)}}])&&ee(t.prototype,n),r&&ee(t,r),e}());function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,r;return t=e,r=[{key:"showErrors",value:function(e){console.log("SHow Errors",e)}}],(n=[{key:"render",value:function(e){if(e){this.element.innerHTM="",te.render(),this.element.insertAdjacentHTML("beforeend",Q(e));var t=document.getElementsByName("editButton")[0],n=document.getElementsByName("back")[0];t.addEventListener("click",(function(t){t.preventDefault(),F.emit(a.redirect,{path:h,data:e})})),n.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.goBack)}))}else F.emit(l.needUserData)}}])&&ne(t.prototype,n),r&&ne(t,r),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=re(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=ie.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var ie=/["&<>]/;function le(e){var t,a,r="";try{var s={"ProfileEditForm.pug":'//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Редактирование профиля\')\n//\n//form(method=\'POST\', enctype = \'multipart/form-data\')\n//    +text(\'Имя\')\n//    input(type=\'text\', name=\'profile_firstName\', value=locals.name, class=classNames.inputClass)\n//    +text(\'Фамилия\')\n//    input(type=\'text\', name=\'profile_lastName\', value=locals.surname, class=classNames.inputClass)\n//    +text(\'Аватар\')\n//    +avatar(locals.avatar)\n//    input(type=\'file\', placeholder=\'Выберете аватар\', name=\'avatar\', class=classNames.inputClass)\n//    input(type=\'submit\', value=\'Применить\', class=classNames.inputClass)\n//    +button(\'Назад\',\'back\')\n\n\ndiv(class="Page-profile")\n\n    form(method=\'POST\', enctype = \'multipart/form-data\' class="form-profile-edit")\n        img(src=locals.avatar class="img-Profile")\n        div(class="group name-Profile-edit")\n            input(class="Input" name=\'profile_firstName\' type="text" required value=locals.name)\n            span(class="bar")\n            label(class="label-input") Имя\n\n        div(class="group surname-Profile-edit")\n            input(class="Input" type="text" name=\'profile_lastName\' required value=locals.surname)\n            span(class="bar")\n            label(class="label-input") Фамилия\n\n\n        div(class="input-file updateImg-Profile-edit")\n            div(class="form-group")\n                input(type="file" name="avatar" id="file" class="input-file")\n                label(for="file" class="btn btn-tertiary js-labelFile")\n                    span(class="js-fileName") Обновить аватар\n\n        button(class="Button button-back-edit Button-state-passive" name="back") Назад\n        button(class="Button button-submit-edit Button-state-accept" name="submit") Подтвердить\n\n//export {template}\n\n'};a=1,t="ProfileEditForm.pug",r+="\x3c!--include  BaseComponents/button--\x3e",a=2,t="ProfileEditForm.pug",r+="\x3c!--include BaseComponents/pageTitle--\x3e",a=3,t="ProfileEditForm.pug",r+="\x3c!--include BaseComponents/Text--\x3e",a=4,t="ProfileEditForm.pug",r+="\x3c!--include BaseComponents/avatar--\x3e",a=5,t="ProfileEditForm.pug",r+="\x3c!--include BaseComponents/classNames--\x3e",a=6,t="ProfileEditForm.pug",r+="\x3c!----\x3e",a=7,t="ProfileEditForm.pug",r+="\x3c!--+pageTitle('Редактирование профиля')--\x3e",a=8,t="ProfileEditForm.pug",r+="\x3c!----\x3e",a=9,t="ProfileEditForm.pug",r+="\x3c!--form(method='POST', enctype = 'multipart/form-data')--\x3e",a=10,t="ProfileEditForm.pug",r+="\x3c!--    +text('Имя')--\x3e",a=11,t="ProfileEditForm.pug",r+="\x3c!--    input(type='text', name='profile_firstName', value=locals.name, class=classNames.inputClass)--\x3e",a=12,t="ProfileEditForm.pug",r+="\x3c!--    +text('Фамилия')--\x3e",a=13,t="ProfileEditForm.pug",r+="\x3c!--    input(type='text', name='profile_lastName', value=locals.surname, class=classNames.inputClass)--\x3e",a=14,t="ProfileEditForm.pug",r+="\x3c!--    +text('Аватар')--\x3e",a=15,t="ProfileEditForm.pug",r+="\x3c!--    +avatar(locals.avatar)--\x3e",a=16,t="ProfileEditForm.pug",r+="\x3c!--    input(type='file', placeholder='Выберете аватар', name='avatar', class=classNames.inputClass)--\x3e",a=17,t="ProfileEditForm.pug",r+="\x3c!--    input(type='submit', value='Применить', class=classNames.inputClass)--\x3e",a=18,t="ProfileEditForm.pug",r+="\x3c!--    +button('Назад','back')--\x3e",a=21,t="ProfileEditForm.pug",r+='<div class="Page-profile">',a=23,t="ProfileEditForm.pug",a=24,t="ProfileEditForm.pug",r=(r+='<form class="form-profile-edit" method="POST" enctype="multipart/form-data">')+'<img class="img-Profile"'+se("src",e.avatar,!0,!1)+"/>",a=25,t="ProfileEditForm.pug",a=26,t="ProfileEditForm.pug",r=(r+='<div class="group name-Profile-edit">')+'<input class="Input" name="profile_firstName" type="text"'+se("required",!0,!0,!1)+se("value",e.name,!0,!1)+"/>",a=27,t="ProfileEditForm.pug",r+='<span class="bar"></span>',a=28,t="ProfileEditForm.pug",r+='<label class="label-input">',a=28,t="ProfileEditForm.pug",r+="Имя</label></div>",a=30,t="ProfileEditForm.pug",a=31,t="ProfileEditForm.pug",r=(r+='<div class="group surname-Profile-edit">')+'<input class="Input" type="text" name="profile_lastName"'+se("required",!0,!0,!1)+se("value",e.surname,!0,!1)+"/>",a=32,t="ProfileEditForm.pug",r+='<span class="bar"></span>',a=33,t="ProfileEditForm.pug",r+='<label class="label-input">',a=33,t="ProfileEditForm.pug",r+="Фамилия</label></div>",a=36,t="ProfileEditForm.pug",r+='<div class="input-file updateImg-Profile-edit">',a=37,t="ProfileEditForm.pug",r+='<div class="form-group">',a=38,t="ProfileEditForm.pug",r+='<input class="input-file" type="file" name="avatar" id="file"/>',a=39,t="ProfileEditForm.pug",r+='<label class="btn btn-tertiary js-labelFile" for="file">',a=40,t="ProfileEditForm.pug",r+='<span class="js-fileName">',a=40,t="ProfileEditForm.pug",r+="Обновить аватар</span></label></div></div>",a=42,t="ProfileEditForm.pug",r+='<button class="Button button-back-edit Button-state-passive" name="back">',a=42,t="ProfileEditForm.pug",r+="Назад</button>",a=43,t="ProfileEditForm.pug",r+='<button class="Button button-submit-edit Button-state-accept" name="submit">',a=43,t="ProfileEditForm.pug",r+="Подтвердить</button></form></div>",a=45,t="ProfileEditForm.pug",r+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,t,a,s[t])}return r}function oe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,F.on(g.profileEdit.fail,e.showErrors.bind(this))}var t,n,r;return t=e,r=[{key:"showErrors",value:function(e){console.log("PROFILE EDIT Errors",e)}}],(n=[{key:"render",value:function(e){if(e){this.element.innerHTML="",te.render(),this.element.insertAdjacentHTML("beforeend",le(e));var t=document.getElementsByTagName("form")[0],n=document.getElementsByName("back")[0];t.addEventListener("submit",(function(e){e.preventDefault(),console.log("SUBMIT PROFILE EDIT"),F.emit(i.submit,{target:"ProfileEditView",data:new FormData(t)})})),n.addEventListener("click",(function(e){e.preventDefault(),F.emit(a.goBack)}))}else F.emit(i.needUserData)}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var pe=new(function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=n,F.on(g.profileEdit.success,(function(e){F.emit(a.redirect,{path:v,data:e})})),F.on(i.needUserData,(function(){r.view.render(r.model.user)}))}var t,n,r;return t=e,(n=[{key:"setView",value:function(e){this.view=e}},{key:"setModel",value:function(e){this.model=e}}])&&ce(t.prototype,n),r&&ce(t,r),e}());function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=me(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=de(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function de(e){var t=""+e,n=fe.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}var fe=/["&<>]/;function be(e){var t,a,r,s="";try{var i={"mainPage.pug":'div(class="mainPage")\n\n    if(locals.folderList)\n        div(class="folders-main")\n            ul(class="listView")\n                each folder in locals.folderList\n                    li(class="folder") #{folder}\n\n    if(locals.letterList)\n        div(class="letterlist-main")\n            ul(class="listView" name=\'letterList\')\n                each letter in locals.letterList\n                    - date = new Date(letter.DateTime * 1000)\n                    li()\n                        if(locals.letter & locals.letter.Id === letter.Id)\n                            conso\n                            div(id=letter.Id class="letter-title state-checked")\n                                label(class="label theme-title") #{letter.Theme}\n                                label(class="label sender-title") #{letter.Sender}\n                                label(class="label datetime-title") #{date.toLocaleTimeString()}\n                                label(class="label text-title") #{letter.Text}\n                        else\n                            div(id=letter.Id class="letter-title")\n                                label(class="label theme-title") #{letter.Theme}\n                                label(class="label sender-title") #{letter.Sender}\n                                label(class="label datetime-title") #{date.toLocaleTimeString()}\n                                label(class="label text-title") #{letter.Text}\n\n\n\n    if(locals.letter && locals.letter.Id)\n        - date = new Date(locals.letter.DateTime * 1000)\n        div(class="letter-main")\n            div(class="letter-view")\n                div(class="senderTitle-view")\n                    div(class="group input-theme-writeLetter")\n                        input(class="Input disabled-input" type="text" placeholder=locals.letter.Sender)\n                        span(class="bar")\n                        label(class="label-input") От\n\n                div(class="themeTitle-view")\n                    div(class="group input-theme-writeLetter")\n                        input(class="Input disabled-input" type="text" placeholder=locals.letter.Theme)\n                        span(class="bar")\n                        label(class="label-input") Тема\n\n                label(class="label dateTime-view") #{date.toLocaleTimeString()}  #{date.toLocaleDateString()}\n                textarea(class="textarea disabled-input p-letter-text text-view")  #{locals.letter.Text}\n\n//export {template}'},l=e||{};(function(n,i){r=1,a="mainPage.pug",s+='<div class="mainPage">',r=3,a="mainPage.pug",e.folderList&&(r=4,a="mainPage.pug",s+='<div class="folders-main">',r=5,a="mainPage.pug",s+='<ul class="listView">',r=6,a="mainPage.pug",function(){var n=e.folderList;if("number"==typeof n.length)for(var i=0,l=n.length;i<l;i++){var o=n[i];r=7,a="mainPage.pug",r=7,a="mainPage.pug",s=(s+='<li class="folder">')+de(null==(t=o)?"":t)+"</li>"}else{l=0;for(var i in n){l++;o=n[i];r=7,a="mainPage.pug",r=7,a="mainPage.pug",s=(s+='<li class="folder">')+de(null==(t=o)?"":t)+"</li>"}}}.call(this),s+="</ul></div>"),r=9,a="mainPage.pug",e.letterList&&(r=10,a="mainPage.pug",s+='<div class="letterlist-main">',r=11,a="mainPage.pug",s+='<ul class="listView" name="letterList">',r=12,a="mainPage.pug",function(){var l=e.letterList;if("number"==typeof l.length)for(var o=0,u=l.length;o<u;o++){var c=l[o];r=13,a="mainPage.pug",i=new n(1e3*c.DateTime),r=14,a="mainPage.pug",s+="<li>",r=15,a="mainPage.pug",e.letter&e.letter.Id===c.Id?(r=16,a="mainPage.pug",r=17,a="mainPage.pug",s=(s+="<conso></conso>")+'<div class="letter-title state-checked"'+ge("id",c.Id,!0,!1)+">",r=18,a="mainPage.pug",r=18,a="mainPage.pug",s=(s+='<label class="label theme-title">')+de(null==(t=c.Theme)?"":t)+"</label>",r=19,a="mainPage.pug",r=19,a="mainPage.pug",s=(s+='<label class="label sender-title">')+de(null==(t=c.Sender)?"":t)+"</label>",r=20,a="mainPage.pug",r=20,a="mainPage.pug",s=(s+='<label class="label datetime-title">')+de(null==(t=i.toLocaleTimeString())?"":t)+"</label>",r=21,a="mainPage.pug",r=21,a="mainPage.pug",s=(s+='<label class="label text-title">')+de(null==(t=c.Text)?"":t)+"</label></div>"):(r=23,a="mainPage.pug",s=s+'<div class="letter-title"'+ge("id",c.Id,!0,!1)+">",r=24,a="mainPage.pug",r=24,a="mainPage.pug",s=(s+='<label class="label theme-title">')+de(null==(t=c.Theme)?"":t)+"</label>",r=25,a="mainPage.pug",r=25,a="mainPage.pug",s=(s+='<label class="label sender-title">')+de(null==(t=c.Sender)?"":t)+"</label>",r=26,a="mainPage.pug",r=26,a="mainPage.pug",s=(s+='<label class="label datetime-title">')+de(null==(t=i.toLocaleTimeString())?"":t)+"</label>",r=27,a="mainPage.pug",r=27,a="mainPage.pug",s=(s+='<label class="label text-title">')+de(null==(t=c.Text)?"":t)+"</label></div>"),s+="</li>"}else{u=0;for(var o in l){u++;c=l[o];r=13,a="mainPage.pug",i=new n(1e3*c.DateTime),r=14,a="mainPage.pug",s+="<li>",r=15,a="mainPage.pug",e.letter&e.letter.Id===c.Id?(r=16,a="mainPage.pug",r=17,a="mainPage.pug",s=(s+="<conso></conso>")+'<div class="letter-title state-checked"'+ge("id",c.Id,!0,!1)+">",r=18,a="mainPage.pug",r=18,a="mainPage.pug",s=(s+='<label class="label theme-title">')+de(null==(t=c.Theme)?"":t)+"</label>",r=19,a="mainPage.pug",r=19,a="mainPage.pug",s=(s+='<label class="label sender-title">')+de(null==(t=c.Sender)?"":t)+"</label>",r=20,a="mainPage.pug",r=20,a="mainPage.pug",s=(s+='<label class="label datetime-title">')+de(null==(t=i.toLocaleTimeString())?"":t)+"</label>",r=21,a="mainPage.pug",r=21,a="mainPage.pug",s=(s+='<label class="label text-title">')+de(null==(t=c.Text)?"":t)+"</label></div>"):(r=23,a="mainPage.pug",s=s+'<div class="letter-title"'+ge("id",c.Id,!0,!1)+">",r=24,a="mainPage.pug",r=24,a="mainPage.pug",s=(s+='<label class="label theme-title">')+de(null==(t=c.Theme)?"":t)+"</label>",r=25,a="mainPage.pug",r=25,a="mainPage.pug",s=(s+='<label class="label sender-title">')+de(null==(t=c.Sender)?"":t)+"</label>",r=26,a="mainPage.pug",r=26,a="mainPage.pug",s=(s+='<label class="label datetime-title">')+de(null==(t=i.toLocaleTimeString())?"":t)+"</label>",r=27,a="mainPage.pug",r=27,a="mainPage.pug",s=(s+='<label class="label text-title">')+de(null==(t=c.Text)?"":t)+"</label></div>"),s+="</li>"}}}.call(this),s+="</ul></div>"),r=31,a="mainPage.pug",e.letter&&e.letter.Id&&(r=32,a="mainPage.pug",i=new n(1e3*e.letter.DateTime),r=33,a="mainPage.pug",s+='<div class="letter-main">',r=34,a="mainPage.pug",s+='<div class="letter-view">',r=35,a="mainPage.pug",s+='<div class="senderTitle-view">',r=36,a="mainPage.pug",r=37,a="mainPage.pug",s=(s+='<div class="group input-theme-writeLetter">')+'<input class="Input disabled-input" type="text"'+ge("placeholder",e.letter.Sender,!0,!1)+"/>",r=38,a="mainPage.pug",s+='<span class="bar"></span>',r=39,a="mainPage.pug",s+='<label class="label-input">',r=39,a="mainPage.pug",s+="От</label></div></div>",r=41,a="mainPage.pug",s+='<div class="themeTitle-view">',r=42,a="mainPage.pug",r=43,a="mainPage.pug",s=(s+='<div class="group input-theme-writeLetter">')+'<input class="Input disabled-input" type="text"'+ge("placeholder",e.letter.Theme,!0,!1)+"/>",r=44,a="mainPage.pug",s+='<span class="bar"></span>',r=45,a="mainPage.pug",s+='<label class="label-input">',r=45,a="mainPage.pug",s+="Тема</label></div></div>",r=47,a="mainPage.pug",s+='<label class="label dateTime-view">',r=47,a="mainPage.pug",s+=de(null==(t=i.toLocaleTimeString())?"":t),r=47,a="mainPage.pug",r=47,a="mainPage.pug",s=(s+="  ")+de(null==(t=i.toLocaleDateString())?"":t)+"</label>",r=48,a="mainPage.pug",s+='<textarea class="textarea disabled-input p-letter-text text-view">',r=48,a="mainPage.pug",r=48,a="mainPage.pug",s=(s+=" ")+de(null==(t=e.letter.Text)?"":t)+"</textarea></div></div>"),s+="</div>",r=50,a="mainPage.pug",s+="\x3c!--export {template}--\x3e"}).call(this,"Date"in l?l.Date:"undefined"!=typeof Date?Date:void 0,"date"in l?l.date:"undefined"!=typeof date?date:void 0)}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,a,r,i[a])}return s}function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,a;return t=e,(n=[{key:"render",value:function(e){if(console.log("RENDER MAIN PAGE DATA, dat",e),e&&e.letterList&&e.folderList){this.element.innerHTML="",te.render(),this.element.insertAdjacentHTML("beforeend",be(e));var t=document.getElementsByName("letterList")[0],n=document.getElementsByClassName("listView")[0];t.addEventListener("click",(function(e){if(console.log("CLICK LETTER",e.target),"UL"!==e.target.tagName)return"DIV"===e.target.tagName?(console.log("DIV ID ",e.target.id),void F.emit(o.selectLetter,e.target.id)):void F.emit(o.selectLetter,e.target.parentNode.id)})),n.addEventListener("click",(function(e){console.log("CLICK FOLDER",e.target.innerText),F.emit(o.selectFolder,e.target.innerText)}))}else F.emit(o.needData,"Входящие")}}])&&ve(t.prototype,n),a&&ve(t,a),e}();function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ye=new(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainPageView=t,this.data={},F.on(m.getLetter.success,(function(e){n.data.letter=e})),F.on(m.getLetterList.success,(function(e){n.data.letterList=e})),F.on(m.getFolderList.success,(function(e){n.data.folderList=e})),F.on(o.needData,(function(){n.data.letter={};F.emit(u.needGetFolderList),F.emit(u.needGetLetterList,"Входящие"),F.on(m.getLetterList.success,(function e(t){n.data.letterList=t,n.mainPageView.render(n.data),F.off(m.getLetterList.success,e)}))})),F.on(o.selectLetter,(function(e){console.log("SELECT LETTER ",e,n.data.letterList),n.data.letter=n.data.letterList[e],n.mainPageView.render(n.data)})),F.on(m.sendLetter.success,(function(){F.emit(a.redirect,{path:P})})),F.on(o.selectFolder,(function(e){console.log("SELECT LETTER ",e,n.data.letterList),F.emit(u.needGetLetterList,e);F.on(m.getLetterList.success,(function e(t){console.log("SELECTED LETTER"),F.off(m.getLetterList.success,e),n.data.letterList=t,n.mainPageView.render(n.data)}))}))}var t,n,r;return t=e,(n=[{key:"setView",value:function(e){this.mainPageView=e}},{key:"setModel",value:function(e){this.model=e}}])&&Pe(t.prototype,n),r&&Pe(t,r),e}());function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=we(t);return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=Le.exec(t);if(!n)return e;var a,r,s,i="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=s}return r!==a?i+t.substring(r,a):i}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var Le=/["&<>]/;function xe(e){var t,a,r="";try{var s={"SendLetterForm.pug":"//include BaseComponents/classNames\n//include BaseComponents/pageTitle\n//include  BaseComponents/button\n//\n//+pageTitle('Отправить письмо')\n//\n//form(method='POST', name='sendLetterForm' class=classNames.formClass)\n//    p(class='InputTitle') Получатель\n//    input(type='text', name='to', class=classNames.inputClass)\n//    p(class='InputTitle') Тема\n//    input(type='text', name='theme', class=classNames.inputClass)\n//    p(class='InputTitle') Текст\n//    input(type='text', name='text', class=classNames.inputClass)\n//    input(type='submit', value='Отправить письмо', class='submit', class=classNames.inputClass)\n//    +button('Назад', 'back', classNames.regButton)\n//\n////export { template };\n\ndiv(class=\"Page-WriteLetter\")\n\n    form(method='POST', name='sendLetterForm' class=\"Form-WriteLetter\")\n        div(class=\"group input-reciever-writeLetter\") \n            input(class=\"Input\" name='to' type=\"text\" required)\n            span(class=\"bar\") \n            label(class=\"label-input\") Кому\n        \n        div(class=\"group input-theme-writeLetter\") \n            input(class=\"Input\" name='theme' type=\"text\" required)\n            span(class=\"bar\") \n            label(class=\"label-input\") Тема\n        \n        div(class=\"input-text-writeLetter\") \n            textarea(class=\"textarea input-letter-text\" name='text' placeholder=\"Письмо\" type=\"text\" required)\n        \n        div(class=\"row__item buttons-writeLetter AcceptBackButtonForm\") \n            button(class=\"Button Button-state-passive\" name=\"back\") Назад\n            button(class=\"Button dekipoldag-kutensa button-send-writeLetter\" type=\"submit\") Отправить\n"};a=1,t="SendLetterForm.pug",r+="\x3c!--include BaseComponents/classNames--\x3e",a=2,t="SendLetterForm.pug",r+="\x3c!--include BaseComponents/pageTitle--\x3e",a=3,t="SendLetterForm.pug",r+="\x3c!--include  BaseComponents/button--\x3e",a=4,t="SendLetterForm.pug",r+="\x3c!----\x3e",a=5,t="SendLetterForm.pug",r+="\x3c!--+pageTitle('Отправить письмо')--\x3e",a=6,t="SendLetterForm.pug",r+="\x3c!----\x3e",a=7,t="SendLetterForm.pug",r+="\x3c!--form(method='POST', name='sendLetterForm' class=classNames.formClass)--\x3e",a=8,t="SendLetterForm.pug",r+="\x3c!--    p(class='InputTitle') Получатель--\x3e",a=9,t="SendLetterForm.pug",r+="\x3c!--    input(type='text', name='to', class=classNames.inputClass)--\x3e",a=10,t="SendLetterForm.pug",r+="\x3c!--    p(class='InputTitle') Тема--\x3e",a=11,t="SendLetterForm.pug",r+="\x3c!--    input(type='text', name='theme', class=classNames.inputClass)--\x3e",a=12,t="SendLetterForm.pug",r+="\x3c!--    p(class='InputTitle') Текст--\x3e",a=13,t="SendLetterForm.pug",r+="\x3c!--    input(type='text', name='text', class=classNames.inputClass)--\x3e",a=14,t="SendLetterForm.pug",r+="\x3c!--    input(type='submit', value='Отправить письмо', class='submit', class=classNames.inputClass)--\x3e",a=15,t="SendLetterForm.pug",r+="\x3c!--    +button('Назад', 'back', classNames.regButton)--\x3e",a=16,t="SendLetterForm.pug",r+="\x3c!----\x3e",a=17,t="SendLetterForm.pug",r+="\x3c!--//export { template };--\x3e",a=19,t="SendLetterForm.pug",r+='<div class="Page-WriteLetter">',a=21,t="SendLetterForm.pug",r+='<form class="Form-WriteLetter" method="POST" name="sendLetterForm">',a=22,t="SendLetterForm.pug",r+='<div class="group input-reciever-writeLetter">',a=22,t="SendLetterForm.pug",a=23,t="SendLetterForm.pug",r=(r+=" ")+'<input class="Input" name="to" type="text"'+Se("required",!0,!0,!1)+"/>",a=24,t="SendLetterForm.pug",r+='<span class="bar">',a=24,t="SendLetterForm.pug",r+=" </span>",a=25,t="SendLetterForm.pug",r+='<label class="label-input">',a=25,t="SendLetterForm.pug",r+="Кому</label></div>",a=27,t="SendLetterForm.pug",r+='<div class="group input-theme-writeLetter">',a=27,t="SendLetterForm.pug",a=28,t="SendLetterForm.pug",r=(r+=" ")+'<input class="Input" name="theme" type="text"'+Se("required",!0,!0,!1)+"/>",a=29,t="SendLetterForm.pug",r+='<span class="bar">',a=29,t="SendLetterForm.pug",r+=" </span>",a=30,t="SendLetterForm.pug",r+='<label class="label-input">',a=30,t="SendLetterForm.pug",r+="Тема</label></div>",a=32,t="SendLetterForm.pug",r+='<div class="input-text-writeLetter">',a=32,t="SendLetterForm.pug",a=33,t="SendLetterForm.pug",r=(r+=" ")+'<textarea class="textarea input-letter-text" name="text" placeholder="Письмо" type="text"'+Se("required",!0,!0,!1)+"></textarea></div>",a=35,t="SendLetterForm.pug",r+='<div class="row__item buttons-writeLetter AcceptBackButtonForm">',a=35,t="SendLetterForm.pug",r+=" ",a=36,t="SendLetterForm.pug",r+='<button class="Button Button-state-passive" name="back">',a=36,t="SendLetterForm.pug",r+="Назад</button>",a=37,t="SendLetterForm.pug",r+='<button class="Button dekipoldag-kutensa button-send-writeLetter" type="submit">',a=37,t="SendLetterForm.pug",r+="Отправить</button></div></form></div>"}catch(e){!function e(t,a,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||s))throw t.message+=" on line "+r,t;try{s=s||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,r)}var i=3,l=s.split("\n"),o=Math.max(r-i,0),u=Math.min(l.length,r+i);throw i=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}(e,t,a,s[t])}return r}function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,F.on(m.sendLetter.fail,e.showErrors.bind(this))}var t,n,r;return t=e,r=[{key:"showErrors",value:function(e){console.log("SEND LETTER ERRORS SHOW",e);var t=document.getElementsByName("to")[0],n=document.getElementsByName("theme")[0],a=document.getElementsByName("text")[0];e.to&&(t.value="",t.placeholder=e.to),e.theme&&(n.value="",n.placeholder=e.theme),e.text&&(a.value="",a.placeholder=e.text)}}],(n=[{key:"render",value:function(e){console.log("SEND LETTER VIEW RENDER"),this.element.innerHTML="",te.render(),this.element.insertAdjacentHTML("beforeend",xe());var t=document.getElementsByTagName("FORM")[0];t.addEventListener("submit",(function(e){e.preventDefault(),F.emit(c.sendLetter,new FormData(t))})),document.getElementsByName("back")[0].addEventListener("click",(function(e){e.preventDefault(),F.emit(a.goBack)}))}}])&&Ee(t.prototype,n),r&&Ee(t,r),e}();function Fe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ke=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F.on(p.needData,(function(){t.navbarView.render({avatar:t.userModel.user.avatar})}))}var t,n,a;return t=e,(n=[{key:"setNavbarView",value:function(e){this.navbarView=e}},{key:"setUserModel",value:function(e){this.userModel=e}}])&&Fe(t.prototype,n),a&&Fe(t,a),e}());function Ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ie=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F.on(l.needUserData,(function(){t.profileView.render(t.model.user)}))}var t,n,a;return t=e,(n=[{key:"setView",value:function(e){this.profileView=e}},{key:"setModel",value:function(e){this.model=e}}])&&Ne(t.prototype,n),a&&Ne(t,a),e}());new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F.on(g.signIn.success,(function(){F.emit(a.redirect,{path:P})}))};new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F.on(g.signUp.success,(function(e){console.log("SIGNUP SUCCESS"),F.emit(a.redirect,{path:P,data:e})}))};var Be=new N,Ue=new C(document.body),Ae=new j(document.body),Oe=new ae(document.body),Ce=new ue(document.body),De=new he(document.body),Ve=new Te(document.body);W.setUrl("http://localhost:8080");var _e=new K("http://localhost:8080");ye.setView(De),ke.setNavbarView(te),ke.setUserModel(W),pe.setView(Ce),pe.setModel(W),Ie.setView(Oe),Ie.setModel(W),Be.register(f,Ue),Be.register(b,Ae),Be.register(v,Oe),Be.register(h,Ce),Be.register(P,De),Be.register(y,Ve),console.log(window.location.pathname),W.getUserData(),F.on(g.profileGetData.success,(function e(){console.log("h1"),F.off(g.profileGetData.success,e),K.getFolders()})),F.on(m.getFolderList.success,(function e(){console.log("h2"),F.off(m.getFolderList.success,e),_e.getLetterList("Входящие")})),F.on(m.getLetterList.success,(function e(){console.log("h3"),F.off(m.getLetterList.success,e);try{Be.start(window.location.pathname)}catch(e){console.log("CATCH PATH, err",e),Be.start(f)}})),F.on(g.profileGetData.fail,(function e(){F.off(g.profileGetData.fail,e),console.log("h4"),Be.start(f)}))}]);
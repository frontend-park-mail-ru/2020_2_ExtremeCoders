!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var a={goBack:"goBack",redirect:"redirect"},s={submit:"SignIn-submit",errors:"SignIn-errors"},i={submit:"SignUp-submit",errors:"SignUp-errors"},r={submit:"ProfileEdit-submit",errors:"ProfileEdit-errors",needUserData:"ProfileEditView-needUserData"},l={needUserData:"ProfileView-needUserData"},o={needData:"mainPageView-needData",selectLetter:"mainPageView-selectLetter"},u={needGetFolderList:"mainPageController-needGetFolderList",needGetLetterList:"mainPageController-needGetLetterList",needGetLetter:"mainPageController-needGetLetter"},c={sendLetter:"sendLetterView-sendLetter"},p={needData:"navbar-needData"},m={getLetter:{success:"letterModelEvents-getLetter-success",fail:"letterModelEvents-getLetter-fail"},getLetterList:{success:"letterModelEvents-getLetterList-success",fail:"letterModelEvents-getLetterList-fail"},getFolderList:{success:"letterModelEvents-getFolderList-success",fail:"letterModelEvents-getFolderList-fail"},sendLetter:{success:"letterModelEvents-sendLetter-success",fail:"letterModelEvents-sendLetter-fail"}},g={signIn:{success:"UserModel-authorizationSuccess",fail:"UserModel-authorizationFail"},signUp:{success:"UserModel-signupSuccess",fail:"UserModel-signupFail"},profileEdit:{success:"UserModel-profileEditSuccess",fail:"UserModel-profileEditFail"},profileGetData:{success:"profile-successGetData",fail:"fail-getData"}},d="/signin",f="/signup",b="/profile",v="/profileEdit",h="/letters",y="/sendLetter",x="/logout";function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var S=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"on",value:function(e,t){return this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t),this}},{key:"off",value:function(e,t){var n=this._eventHandlers&&this._eventHandlers[e];n&&(n=n.filter((function(e){return e!==t})),this._eventHandlers[e]=n)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];console.log("EMIT",e,a),this._eventHandlers&&this._eventHandlers[e]&&this._eventHandlers[e].forEach((function(e){return e.apply(t,a)}))}}])&&P(t.prototype,n),a&&P(t,a),e}());function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var F=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registeredPathes={},window.onpopstate=function(e){e.preventDefault(),console.log("HISTORY EVENT",e);try{t.registeredPathes[e.state.path].render(e.state.data)}catch(e){location=location.href}},S.on(a.redirect,this.go.bind(this)),S.on(a.goBack,this.back.bind(this))}var t,n,s;return t=e,(n=[{key:"register",value:function(e,t){this.registeredPathes[e]=t}},{key:"start",value:function(e,t){console.log("START PATH",e),window.history.pushState({path:e,data:t||1},"Start",e),this.registeredPathes[e].render(t)}},{key:"go",value:function(e){console.log("GOOO",e),e&&(this.registeredPathes[e.path].render(e.data||0),window.history.pushState({path:e.path,data:e.data||0},e.path,e.path))}},{key:"back",value:function(){console.log("I'L BE BACK"),window.history.back(),console.log("href",location.pathname),this.registeredPathes[location.pathname].render()}}])&&w(t.prototype,n),s&&w(t,s),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=L(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=T.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var T=/["&<>]/;function I(e){var t,a,s="";try{var i={"SignInForm.pug":'//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Войти\')\n//form(method=\'POST\' class=classNames.formClass)\n//    +text(\'Login\')\n//    input(type=\'text\', name=\'email\', class=classNames.inputClass)\n//    +text(\'Password\')\n//    input(type=\'password\', name=\'password\', class=classNames.inputClass)\n//    input(type=\'submit\', value=\'Войти\', class=classNames.inputClass)\n//    +button(\'Регистрация\',\'signup\', classNames.loginButton)\n//    +button(\'Назад\',\'back\', classNames.regButton)\n\n//export {signinformTemplate}\n\ndiv(class="SignInPage")\n    form(class="SignInForm")\n        label(class="label-form") Вход\n        div(class="group")\n            input(class="Input" type="text" name=\'email\' required)\n            span(class="bar")\n            label(class="label-input") Email\n\n        div(class="group")\n            input(class="Input" type="text" name=\'password\' required)\n            span(class="bar")\n            label(class="label-input") Password\n        div(class="row__item buttons-SignInForm AcceptBackButtonForm")\n            button(class="Button Button-state-passive" name="signup") Зарегистрироваться\n            button(class="Button Button-state-accept" name="submit") Войти\n\n//export {template}'};a=1,t="SignInForm.pug",s+="\x3c!--include  BaseComponents/button--\x3e",a=2,t="SignInForm.pug",s+="\x3c!--include BaseComponents/pageTitle--\x3e",a=3,t="SignInForm.pug",s+="\x3c!--include BaseComponents/Text--\x3e",a=4,t="SignInForm.pug",s+="\x3c!--include BaseComponents/avatar--\x3e",a=5,t="SignInForm.pug",s+="\x3c!--include BaseComponents/classNames--\x3e",a=6,t="SignInForm.pug",s+="\x3c!----\x3e",a=7,t="SignInForm.pug",s+="\x3c!--+pageTitle('Войти')--\x3e",a=8,t="SignInForm.pug",s+="\x3c!--form(method='POST' class=classNames.formClass)--\x3e",a=9,t="SignInForm.pug",s+="\x3c!--    +text('Login')--\x3e",a=10,t="SignInForm.pug",s+="\x3c!--    input(type='text', name='email', class=classNames.inputClass)--\x3e",a=11,t="SignInForm.pug",s+="\x3c!--    +text('Password')--\x3e",a=12,t="SignInForm.pug",s+="\x3c!--    input(type='password', name='password', class=classNames.inputClass)--\x3e",a=13,t="SignInForm.pug",s+="\x3c!--    input(type='submit', value='Войти', class=classNames.inputClass)--\x3e",a=14,t="SignInForm.pug",s+="\x3c!--    +button('Регистрация','signup', classNames.loginButton)--\x3e",a=15,t="SignInForm.pug",s+="\x3c!--    +button('Назад','back', classNames.regButton)--\x3e",a=17,t="SignInForm.pug",s+="\x3c!--export {signinformTemplate}--\x3e",a=19,t="SignInForm.pug",s+='<div class="SignInPage">',a=20,t="SignInForm.pug",s+='<form class="SignInForm">',a=21,t="SignInForm.pug",s+='<label class="label-form">',a=21,t="SignInForm.pug",s+="Вход</label>",a=22,t="SignInForm.pug",a=23,t="SignInForm.pug",s=(s+='<div class="group">')+'<input class="Input" type="text" name="email"'+E("required",!0,!0,!1)+"/>",a=24,t="SignInForm.pug",s+='<span class="bar"></span>',a=25,t="SignInForm.pug",s+='<label class="label-input">',a=25,t="SignInForm.pug",s+="Email</label></div>",a=27,t="SignInForm.pug",a=28,t="SignInForm.pug",s=(s+='<div class="group">')+'<input class="Input" type="text" name="password"'+E("required",!0,!0,!1)+"/>",a=29,t="SignInForm.pug",s+='<span class="bar"></span>',a=30,t="SignInForm.pug",s+='<label class="label-input">',a=30,t="SignInForm.pug",s+="Password</label></div>",a=31,t="SignInForm.pug",s+='<div class="row__item buttons-SignInForm AcceptBackButtonForm">',a=32,t="SignInForm.pug",s+='<button class="Button Button-state-passive" name="signup">',a=32,t="SignInForm.pug",s+="Зарегистрироваться</button>",a=33,t="SignInForm.pug",s+='<button class="Button Button-state-accept" name="submit">',a=33,t="SignInForm.pug",s+="Войти</button></div></form></div>",a=35,t="SignInForm.pug",s+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,t,a,i[t])}return s}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,S.on(g.signIn.fail,this.showErrors.bind(this))}var t,n,i;return t=e,(n=[{key:"render",value:function(){this.element.innerHTML=I();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("signup")[0];document.getElementsByName("back")[0],e.addEventListener("submit",(function(t){console.log("FORM SUBMIT"),t.preventDefault();var n=new FormData(e);S.emit(s.submit,{target:"SignInView",data:n})})),t.addEventListener("click",(function(e){e.preventDefault(),S.emit(a.redirect,{path:f})}))}},{key:"showErrors",value:function(e){console.log("SIGN IN ERRORS SHOW",e.errors);var t=document.getElementsByName("password")[0],n=document.getElementsByName("email")[0];console.log(e.password),e.password&&(t.value="",t.placeholder=e.password),e.email&&(n.value="",n.placeholder=e.email)}}])&&C(t.prototype,n),i&&C(t,i),e}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=N(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=B.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var B=/["&<>]/;function A(e){var t,a,s="";try{var i={"SignUpForm.pug":'//include  BaseComponents/button\n//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Зарегистрироваться\')\n//\n//form(method=\'POST\', enctype = \'multipart/form-data\', class=\'reg-form\')\n//    p(class=\'InputTitle\') Имя\n//    input(type=\'text\', name=\'name\', class=classNames.inputClass)\n//    p(class=\'InputTitle\') Фамилия\n//    input(type=\'text\', name=\'surname\', class=classNames.inputClass)\n//    p(class=\'InputTitle\') Email\n//    input(type=\'text\', name=\'email\', class=classNames.inputClass)\n//    p(class=\'InputTitle\') Введите Пароль\n//    input(type=\'password\', name=\'password1\', class=classNames.inputClass)\n//    p(class=\'InputTitle\') Повторите пароль\n//    input(type=\'password\', name=\'password2\', class=classNames.inputClass)\n//    p(class=\'InputTitle\') Аватар\n//    input(type=\'file\', placeholder=\'Выберете аватар\', name=\'avatar\', class=classNames.inputClass)\n//    input(type=\'submit\', value=\'Зарегистироваться\', class=\'submit\', class=classNames.inputClass)\n//    +button(\'Назад\', \'back\', classNames.regButton)\n//\n////export {template}\n\ndiv(class="SignUpPage")\n    form(class="SignUpForm")\n        label(class="label-form") Регистрация\n\n        div(class="group")\n            input(class="Input" name=\'email\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Email\n\n        div(class="group")\n            input(class="Input" name=\'password1\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Пароль\n\n        div(class="group")\n            input(class="Input" name=\'password2\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Повторите пароль\n\n        div(class="group")\n            input(class="Input" name=\'name\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Имя\n\n        div(class="group")\n            input(class="Input" name=\'surname\' type="text" required)\n            span(class="bar")\n            label(class="label-input") Фамилия\n\n        div(class="input-file")\n            div(class="form-group")\n                input(type="file" name="avatar" id="file" class="input-file")\n                label(for="file" class="btn btn-tertiary js-labelFile")\n                span(class="js-fileName") Загрузить аватар\n\n        div(class="row__item buttons-SignInForm AcceptBackButtonForm")\n            button(class="Button Button-state-passive" name="back") Войти\n            button(class="Button Button-state-accept" name="submit") Зарегистрироваться\n\n//export {template}\n'};a=1,t="SignUpForm.pug",s+="\x3c!--include  BaseComponents/button--\x3e",a=2,t="SignUpForm.pug",s+="\x3c!--include  BaseComponents/button--\x3e",a=3,t="SignUpForm.pug",s+="\x3c!--include BaseComponents/pageTitle--\x3e",a=4,t="SignUpForm.pug",s+="\x3c!--include BaseComponents/Text--\x3e",a=5,t="SignUpForm.pug",s+="\x3c!--include BaseComponents/avatar--\x3e",a=6,t="SignUpForm.pug",s+="\x3c!--include BaseComponents/classNames--\x3e",a=7,t="SignUpForm.pug",s+="\x3c!----\x3e",a=8,t="SignUpForm.pug",s+="\x3c!--+pageTitle('Зарегистрироваться')--\x3e",a=9,t="SignUpForm.pug",s+="\x3c!----\x3e",a=10,t="SignUpForm.pug",s+="\x3c!--form(method='POST', enctype = 'multipart/form-data', class='reg-form')--\x3e",a=11,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Имя--\x3e",a=12,t="SignUpForm.pug",s+="\x3c!--    input(type='text', name='name', class=classNames.inputClass)--\x3e",a=13,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Фамилия--\x3e",a=14,t="SignUpForm.pug",s+="\x3c!--    input(type='text', name='surname', class=classNames.inputClass)--\x3e",a=15,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Email--\x3e",a=16,t="SignUpForm.pug",s+="\x3c!--    input(type='text', name='email', class=classNames.inputClass)--\x3e",a=17,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Введите Пароль--\x3e",a=18,t="SignUpForm.pug",s+="\x3c!--    input(type='password', name='password1', class=classNames.inputClass)--\x3e",a=19,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Повторите пароль--\x3e",a=20,t="SignUpForm.pug",s+="\x3c!--    input(type='password', name='password2', class=classNames.inputClass)--\x3e",a=21,t="SignUpForm.pug",s+="\x3c!--    p(class='InputTitle') Аватар--\x3e",a=22,t="SignUpForm.pug",s+="\x3c!--    input(type='file', placeholder='Выберете аватар', name='avatar', class=classNames.inputClass)--\x3e",a=23,t="SignUpForm.pug",s+="\x3c!--    input(type='submit', value='Зарегистироваться', class='submit', class=classNames.inputClass)--\x3e",a=24,t="SignUpForm.pug",s+="\x3c!--    +button('Назад', 'back', classNames.regButton)--\x3e",a=25,t="SignUpForm.pug",s+="\x3c!----\x3e",a=26,t="SignUpForm.pug",s+="\x3c!--//export {template}--\x3e",a=28,t="SignUpForm.pug",s+='<div class="SignUpPage">',a=29,t="SignUpForm.pug",s+='<form class="SignUpForm">',a=30,t="SignUpForm.pug",s+='<label class="label-form">',a=30,t="SignUpForm.pug",s+="Регистрация</label>",a=32,t="SignUpForm.pug",a=33,t="SignUpForm.pug",s=(s+='<div class="group">')+'<input class="Input" name="email" type="text"'+U("required",!0,!0,!1)+"/>",a=34,t="SignUpForm.pug",s+='<span class="bar"></span>',a=35,t="SignUpForm.pug",s+='<label class="label-input">',a=35,t="SignUpForm.pug",s+="Email</label></div>",a=37,t="SignUpForm.pug",a=38,t="SignUpForm.pug",s=(s+='<div class="group">')+'<input class="Input" name="password1" type="text"'+U("required",!0,!0,!1)+"/>",a=39,t="SignUpForm.pug",s+='<span class="bar"></span>',a=40,t="SignUpForm.pug",s+='<label class="label-input">',a=40,t="SignUpForm.pug",s+="Пароль</label></div>",a=42,t="SignUpForm.pug",a=43,t="SignUpForm.pug",s=(s+='<div class="group">')+'<input class="Input" name="password2" type="text"'+U("required",!0,!0,!1)+"/>",a=44,t="SignUpForm.pug",s+='<span class="bar"></span>',a=45,t="SignUpForm.pug",s+='<label class="label-input">',a=45,t="SignUpForm.pug",s+="Повторите пароль</label></div>",a=47,t="SignUpForm.pug",a=48,t="SignUpForm.pug",s=(s+='<div class="group">')+'<input class="Input" name="name" type="text"'+U("required",!0,!0,!1)+"/>",a=49,t="SignUpForm.pug",s+='<span class="bar"></span>',a=50,t="SignUpForm.pug",s+='<label class="label-input">',a=50,t="SignUpForm.pug",s+="Имя</label></div>",a=52,t="SignUpForm.pug",a=53,t="SignUpForm.pug",s=(s+='<div class="group">')+'<input class="Input" name="surname" type="text"'+U("required",!0,!0,!1)+"/>",a=54,t="SignUpForm.pug",s+='<span class="bar"></span>',a=55,t="SignUpForm.pug",s+='<label class="label-input">',a=55,t="SignUpForm.pug",s+="Фамилия</label></div>",a=57,t="SignUpForm.pug",s+='<div class="input-file">',a=58,t="SignUpForm.pug",s+='<div class="form-group">',a=59,t="SignUpForm.pug",s+='<input class="input-file" type="file" name="avatar" id="file"/>',a=60,t="SignUpForm.pug",s+='<label class="btn btn-tertiary js-labelFile" for="file"></label>',a=61,t="SignUpForm.pug",s+='<span class="js-fileName">',a=61,t="SignUpForm.pug",s+="Загрузить аватар</span></div></div>",a=63,t="SignUpForm.pug",s+='<div class="row__item buttons-SignInForm AcceptBackButtonForm">',a=64,t="SignUpForm.pug",s+='<button class="Button Button-state-passive" name="back">',a=64,t="SignUpForm.pug",s+="Войти</button>",a=65,t="SignUpForm.pug",s+='<button class="Button Button-state-accept" name="submit">',a=65,t="SignUpForm.pug",s+="Зарегистрироваться</button></div></form></div>",a=67,t="SignUpForm.pug",s+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,t,a,i[t])}return s}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,S.on(g.signUp.fail,this.showErrors.bind(this))}var t,n,s;return t=e,(n=[{key:"render",value:function(){this.element.innerHTML=A();var e=document.getElementsByTagName("form")[0],t=document.getElementsByName("back")[0];e.addEventListener("submit",(function(t){t.preventDefault(),S.emit(i.submit,{target:"SignUpView",data:new FormData(e)})})),t.addEventListener("click",(function(e){e.preventDefault(),S.emit(a.redirect,{path:d})}))}},{key:"showErrors",value:function(e){console.log("SIGN UP ERRORS SHOW",e);var t=document.getElementsByName("email")[0],n=document.getElementsByName("password1")[0],a=document.getElementsByName("password2")[0],s=document.getElementsByName("name")[0],i=document.getElementsByName("surname")[0];console.log(e.password1),e.password1?(n.value="",n.placeholder=e.password1):e.password2&&(a.value="",a.placeholder=e.password2),e.email&&(t.value="",t.placeholder=e.email),e.name&&(s.value="",s.placeholder=e.name),e.surname&&(i.value="",i.placeholder=e.surname)}}])&&O(t.prototype,n),s&&O(t,s),e}();function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var M=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"_checkEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"_checkName",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkSurname",value:function(e){return/[0-9a-z]+/i.test(e)}},{key:"_checkPassword",value:function(e){return e.length>3}},{key:"_checkPasswordEqual",value:function(e,t){return e===t}},{key:"checkSignInForm",value:function(e){var t={};return this._checkEmail(e.get("email"))||(t.email="Некорректный email"),this._checkPassword(e.get("password"))||(t.password="слишком короткий пароль"),t}},{key:"checkSignUpForm",value:function(e){console.log("VALIDATOR SIGN UP",e.get("email"),e.get("password1"),e.get("password2"),e.get("name"),e.get("surname"));var t={};return this._checkEmail(e.get("email"))||(t.email="Некорректный email"),this._checkPassword(e.get("password1"))?this._checkPasswordEqual(e.get("password1"),e.get("password2"))||(t.password2="Пароли не совпадают"):t.password1="слишком короткий пароль",this._checkName(e.get("name"))||(t.name="Некорректное имя"),this._checkSurname(e.get("surname"))||(t.surname="Некорректная фамилия"),t}}])&&_(t.prototype,n),a&&_(t,a),e}());function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var R=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.user={},S.on(s.submit,this.signIn.bind(this)),S.on(i.submit,this.signUp.bind(this)),S.on(r.submit,this.editUser.bind(this)),S.on(l.needUserData,this.getUserData.bind(this))}var t,n,a;return t=e,(n=[{key:"setUrl",value:function(e){this.baseUrl=e}},{key:"signIn",value:function(e){var t=this,n=M.checkSignInForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN IN ",n),void S.emit(g.signIn.fail,n);console.log("SIGN IN ",e,this.baseUrl+d),fetch(this.baseUrl+d,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){200===e.Code?(S.on(g.profileGetData.success,(function e(){S.off(g.profileGetData.success,e),S.emit(g.signIn.success)})),t.getUserData()):401===e.Code?S.emit(g.signIn.fail,{password:e.Description}):404===e.Code?S.emit(g.signIn.fail,{email:e.Description}):S.emit(g.signIn.fail,{unknowError:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"signUp",value:function(e){var t=this,n=M.checkSignUpForm(e.data);if(0!==Object.keys(n).length)return console.log("ERRORS IN SIGN UP ",n),void S.emit(g.signUp.fail,n);fetch(this.baseUrl+f,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?(S.on(g.profileGetData.success,(function e(){S.off(g.profileGetData.success,e),S.emit(g.signUp.success)})),t.getUserData()):S.emit(g.signUp.fail,{email:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"editUser",value:function(e){var t=this;fetch(this.baseUrl+b,{method:"POST",mode:"cors",credentials:"include",body:e.data}).then((function(e){return e.json()})).then((function(e){console.log("RESP SIGN UP UP",e.Code,e),200===e.Code?t.getUserData(g.profileEdit):S.emit(g.profileEdit.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getUserData",value:function(){var e=this,t=fetch(this.baseUrl+b,{method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(console.log("RESP GET USER DATA",t.status,t),200!==t.Code)throw new Error(t.Description);e.user.name=t.User.Name,e.user.email=t.User.Email,e.user.surname=t.User.Surname,e.user.avatar=""})),n=fetch(this.baseUrl+"/getAvatar",{method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.blob()})).then((function(t){console.log("BLOB",t),e.user.avatar=URL.createObjectURL(t)}));Promise.all([t,n]).then((function(t){console.log("УСПЕХ"),console.log("USER",e.user),S.emit(g.profileGetData.success,e.user)}),(function(e){S.emit(g.profileGetData.fail,{errors:e.message})}))}},{key:"logout",value:function(){}}])&&j(t.prototype,n),a&&j(t,a),e}())("http://localhost:8080");function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.Letters=new Map,this.folders={},S.on(u.needGetLetter,this.getLetter.bind(this)),S.on(u.needGetLetterList,this.getLetterList.bind(this)),S.on(u.needGetFolderList,this.getFolders.bind(this)),S.on(c.sendLetter,this.sendLetter.bind(this))}var t,n,a;return t=e,(n=[{key:"getLetter",value:function(e){S.emit(m.getLetter.success,this.Letters[e])}},{key:"sendLetter",value:function(e){fetch(this.baseUrl+"/sendMessage",{method:"POST",mode:"cors",credentials:"include",body:e}).then((function(e){return e.json()})).then((function(e){console.log("RESP SEND LETTER",e),200===e.Code?(console.log("SUCCES SEND LETTER"),S.emit(m.sendLetter.success)):S.emit(m.sendLetter.fail,{error:e.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}},{key:"getFolders",value:function(){S.emit(m.getFolderList.success,["Входящие","Отправленные"])}},{key:"getLetterList",value:function(){var e=this;fetch(this.baseUrl+"/getLetters",{method:"POST",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("RESP GET LETTER LIST",t),200===t.Code?(console.log("SUCCES GET LETTER LETTER LIST"),e.Letters=new Map,t.Letters&&(t.Letters.forEach((function(t){e.Letters[t.Id]=t})),e.Letters.forEach((function(e){console.log("LETTTER",e)}))),S.emit(m.getLetterList.success,e.Letters)):S.emit(m.getLetterList.fail,{error:t.Description})})).catch((function(e){console.log("CAAAAAAAAAAAAAAAATCH",e)}))}}])&&G(t.prototype,n),a&&G(t,a),e}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){var t=""+e,n=J.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}var J=/["&<>]/;function W(e){var t,a,s,i="";try{var r={"ProfilePage.pug":'//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Профиль\')\n//\n////div\n////    +text(locals.name + \' \' + locals.surname, \'profile_name\')\n////    +text(\'Email: \' + locals.email)\n////    +text(\'Аватар\')\n////    +avatar(locals.avatar)\n////    +button(\'Редактировать\', name = \'editButton\')\n////    +button(\'Назад\' ,name=\'back\')\n\ndiv(class="Page-profile")\n    form(class="form-profile-view ")\n        img(src=locals.avatar class="img-Profile")\n        h3(class="row__item nameTitle-Profile") Имя\n        h3(class="row__item name-Profile") #{locals.name}\n        h3(class="row__item surnameTitle-Profile") Фамилия\n        h3(class="row__item surname-Profile") #{locals.surname}\n        h3(class="row__item emailTitle-Profile") Email\n        h3(class="row__item email-Profile") #{locals.email}\n        button(class="Button button-back Button-state-passive" name="back") Назад\n        button(class="Button button-edit Button-state-accept" name="editButton") Редактировать\n\n//export {template}'};s=1,a="ProfilePage.pug",i+="\x3c!--include  BaseComponents/button--\x3e",s=2,a="ProfilePage.pug",i+="\x3c!--include BaseComponents/pageTitle--\x3e",s=3,a="ProfilePage.pug",i+="\x3c!--include BaseComponents/Text--\x3e",s=4,a="ProfilePage.pug",i+="\x3c!--include BaseComponents/avatar--\x3e",s=5,a="ProfilePage.pug",i+="\x3c!--include BaseComponents/classNames--\x3e",s=6,a="ProfilePage.pug",i+="\x3c!----\x3e",s=7,a="ProfilePage.pug",i+="\x3c!--+pageTitle('Профиль')--\x3e",s=8,a="ProfilePage.pug",i+="\x3c!----\x3e",s=9,a="ProfilePage.pug",i+="\x3c!--//div--\x3e",s=10,a="ProfilePage.pug",i+="\x3c!--//    +text(locals.name + ' ' + locals.surname, 'profile_name')--\x3e",s=11,a="ProfilePage.pug",i+="\x3c!--//    +text('Email: ' + locals.email)--\x3e",s=12,a="ProfilePage.pug",i+="\x3c!--//    +text('Аватар')--\x3e",s=13,a="ProfilePage.pug",i+="\x3c!--//    +avatar(locals.avatar)--\x3e",s=14,a="ProfilePage.pug",i+="\x3c!--//    +button('Редактировать', name = 'editButton')--\x3e",s=15,a="ProfilePage.pug",i+="\x3c!--//    +button('Назад' ,name='back')--\x3e",s=17,a="ProfilePage.pug",i+='<div class="Page-profile">',s=18,a="ProfilePage.pug",s=19,a="ProfilePage.pug",i=(i+='<form class="form-profile-view ">')+'<img class="img-Profile"'+function(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=V(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=q(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}("src",e.avatar,!0,!1)+"/>",s=20,a="ProfilePage.pug",i+='<h3 class="row__item nameTitle-Profile">',s=20,a="ProfilePage.pug",i+="Имя</h3>",s=21,a="ProfilePage.pug",s=21,a="ProfilePage.pug",i=(i+='<h3 class="row__item name-Profile">')+q(null==(t=e.name)?"":t)+"</h3>",s=22,a="ProfilePage.pug",i+='<h3 class="row__item surnameTitle-Profile">',s=22,a="ProfilePage.pug",i+="Фамилия</h3>",s=23,a="ProfilePage.pug",s=23,a="ProfilePage.pug",i=(i+='<h3 class="row__item surname-Profile">')+q(null==(t=e.surname)?"":t)+"</h3>",s=24,a="ProfilePage.pug",i+='<h3 class="row__item emailTitle-Profile">',s=24,a="ProfilePage.pug",i+="Email</h3>",s=25,a="ProfilePage.pug",s=25,a="ProfilePage.pug",i=(i+='<h3 class="row__item email-Profile">')+q(null==(t=e.email)?"":t)+"</h3>",s=26,a="ProfilePage.pug",i+='<button class="Button button-back Button-state-passive" name="back">',s=26,a="ProfilePage.pug",i+="Назад</button>",s=27,a="ProfilePage.pug",i+='<button class="Button button-edit Button-state-accept" name="editButton">',s=27,a="ProfilePage.pug",i+="Редактировать</button></form></div>",s=29,a="ProfilePage.pug",i+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,a,s,r[a])}return i}Object.prototype.hasOwnProperty;function z(e){var t,a,s="";try{var i={"navbar.pug":'include button\ninclude avatar\n\ndiv(class="navbar-main")\n    div(class="navbar ")\n        //+avatar(locals.avatar)\n        label(name = \'navbar-letters\' class="label logo-navbar") LOGO\n        button(name = \'navbar-send\' class="Button send-navbar button-send-navbar") Написать\n        button(name = \'navbar-profile\' class="Button-state-accept profile-navbar") Профиль\n        button(name = \'navbar-exit\' class="Button-state-passive exit-navbar") Выйти\n\n//export {template}\n',"button.pug":"mixin button(text, name, className)\n    button(class=className, name=name) #{text}","avatar.pug":"mixin avatar(src)\n    img(width=70, height=70, id='avatar', src=src)"};a=1,t="button.pug",a=1,t="avatar.pug",a=4,t="navbar.pug",s+='<div class="navbar-main">',a=5,t="navbar.pug",s+='<div class="navbar ">',a=6,t="navbar.pug",s+="\x3c!--+avatar(locals.avatar)--\x3e",a=7,t="navbar.pug",s+='<label class="label logo-navbar" name="navbar-letters">',a=7,t="navbar.pug",s+="LOGO</label>",a=8,t="navbar.pug",s+='<button class="Button send-navbar button-send-navbar" name="navbar-send">',a=8,t="navbar.pug",s+="Написать</button>",a=9,t="navbar.pug",s+='<button class="Button-state-accept profile-navbar" name="navbar-profile">',a=9,t="navbar.pug",s+="Профиль</button>",a=10,t="navbar.pug",s+='<button class="Button-state-passive exit-navbar" name="navbar-exit">',a=10,t="navbar.pug",s+="Выйти</button></div></div>",a=12,t="navbar.pug",s+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,t,a,i[t])}return s}function K(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.body}var t,n,s;return t=e,(n=[{key:"render",value:function(e){if(e){this.element.innerHTML="",console.log("NAVBAR VIEW RENDER",e);var t=document.getElementById("navbar")||document.createElement("div");t.id="navbar",t.innerHTML=z(),this.element.insertAdjacentHTML("beforeend",t.innerHTML);var n=document.getElementsByName("navbar-send")[0],s=document.getElementsByName("navbar-profile")[0],i=document.getElementsByName("navbar-exit")[0],r=document.getElementsByName("navbar-letters")[0];n.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),S.emit(a.redirect,{path:y})})),s.addEventListener("click",(function(e){e.preventDefault(),console.log("CLICK"),S.emit(a.redirect,{path:b})})),i.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),S.emit(a.redirect,{path:x})})),r.addEventListener("click",(function(e){console.log("CLICK"),e.preventDefault(),S.emit(a.redirect,{path:h})}))}else S.emit(p.needData)}},{key:"hide",value:function(){document.getElementById("navbar").innerHTML=""}}])&&K(t.prototype,n),s&&K(t,s),e}());function Z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,s;return t=e,(n=[{key:"render",value:function(e){if(e){this.element.innerHTM="",Y.render(),this.element.insertAdjacentHTML("beforeend",W(e));var t=document.getElementsByName("editButton")[0],n=document.getElementsByName("back")[0];t.addEventListener("click",(function(t){t.preventDefault(),S.emit(a.redirect,{path:v,data:e})})),n.addEventListener("click",(function(e){e.preventDefault(),S.emit(a.goBack)}))}else S.emit(l.needUserData)}},{key:"showErrors",value:function(e){console.log("SHow Errors",e)}}])&&Z(t.prototype,n),s&&Z(t,s),e}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=Q(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=ee.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var ee=/["&<>]/;function te(e){var t,a,s="";try{var i={"ProfileEditForm.pug":'//include  BaseComponents/button\n//include BaseComponents/pageTitle\n//include BaseComponents/Text\n//include BaseComponents/avatar\n//include BaseComponents/classNames\n//\n//+pageTitle(\'Редактирование профиля\')\n//\n//form(method=\'POST\', enctype = \'multipart/form-data\')\n//    +text(\'Имя\')\n//    input(type=\'text\', name=\'profile_firstName\', value=locals.name, class=classNames.inputClass)\n//    +text(\'Фамилия\')\n//    input(type=\'text\', name=\'profile_lastName\', value=locals.surname, class=classNames.inputClass)\n//    +text(\'Аватар\')\n//    +avatar(locals.avatar)\n//    input(type=\'file\', placeholder=\'Выберете аватар\', name=\'avatar\', class=classNames.inputClass)\n//    input(type=\'submit\', value=\'Применить\', class=classNames.inputClass)\n//    +button(\'Назад\',\'back\')\n\n\ndiv(class="Page-profile")\n\n    form(method=\'POST\', enctype = \'multipart/form-data\' class="form-profile-edit")\n        img(src=locals.avatar class="img-Profile")\n        div(class="group name-Profile-edit")\n            input(class="Input" name=\'profile_firstName\' type="text" required value=locals.name)\n            span(class="bar")\n            label(class="label-input") Имя\n\n        div(class="group surname-Profile-edit")\n            input(class="Input" type="text" name=\'profile_lastName\' required value=locals.surname)\n            span(class="bar")\n            label(class="label-input") Фамилия\n\n\n        div(class="input-file updateImg-Profile-edit")\n            div(class="form-group")\n                input(type="file" name="avatar" id="file" class="input-file")\n                label(for="file" class="btn btn-tertiary js-labelFile")\n                    span(class="js-fileName") Обновить аватар\n\n        button(class="Button button-back-edit Button-state-passive" name="back") Назад\n        button(class="Button button-submit-edit Button-state-accept" name="submit") Подтвердить\n\n//export {template}\n\n'};a=1,t="ProfileEditForm.pug",s+="\x3c!--include  BaseComponents/button--\x3e",a=2,t="ProfileEditForm.pug",s+="\x3c!--include BaseComponents/pageTitle--\x3e",a=3,t="ProfileEditForm.pug",s+="\x3c!--include BaseComponents/Text--\x3e",a=4,t="ProfileEditForm.pug",s+="\x3c!--include BaseComponents/avatar--\x3e",a=5,t="ProfileEditForm.pug",s+="\x3c!--include BaseComponents/classNames--\x3e",a=6,t="ProfileEditForm.pug",s+="\x3c!----\x3e",a=7,t="ProfileEditForm.pug",s+="\x3c!--+pageTitle('Редактирование профиля')--\x3e",a=8,t="ProfileEditForm.pug",s+="\x3c!----\x3e",a=9,t="ProfileEditForm.pug",s+="\x3c!--form(method='POST', enctype = 'multipart/form-data')--\x3e",a=10,t="ProfileEditForm.pug",s+="\x3c!--    +text('Имя')--\x3e",a=11,t="ProfileEditForm.pug",s+="\x3c!--    input(type='text', name='profile_firstName', value=locals.name, class=classNames.inputClass)--\x3e",a=12,t="ProfileEditForm.pug",s+="\x3c!--    +text('Фамилия')--\x3e",a=13,t="ProfileEditForm.pug",s+="\x3c!--    input(type='text', name='profile_lastName', value=locals.surname, class=classNames.inputClass)--\x3e",a=14,t="ProfileEditForm.pug",s+="\x3c!--    +text('Аватар')--\x3e",a=15,t="ProfileEditForm.pug",s+="\x3c!--    +avatar(locals.avatar)--\x3e",a=16,t="ProfileEditForm.pug",s+="\x3c!--    input(type='file', placeholder='Выберете аватар', name='avatar', class=classNames.inputClass)--\x3e",a=17,t="ProfileEditForm.pug",s+="\x3c!--    input(type='submit', value='Применить', class=classNames.inputClass)--\x3e",a=18,t="ProfileEditForm.pug",s+="\x3c!--    +button('Назад','back')--\x3e",a=21,t="ProfileEditForm.pug",s+='<div class="Page-profile">',a=23,t="ProfileEditForm.pug",a=24,t="ProfileEditForm.pug",s=(s+='<form class="form-profile-edit" method="POST" enctype="multipart/form-data">')+'<img class="img-Profile"'+X("src",e.avatar,!0,!1)+"/>",a=25,t="ProfileEditForm.pug",a=26,t="ProfileEditForm.pug",s=(s+='<div class="group name-Profile-edit">')+'<input class="Input" name="profile_firstName" type="text"'+X("required",!0,!0,!1)+X("value",e.name,!0,!1)+"/>",a=27,t="ProfileEditForm.pug",s+='<span class="bar"></span>',a=28,t="ProfileEditForm.pug",s+='<label class="label-input">',a=28,t="ProfileEditForm.pug",s+="Имя</label></div>",a=30,t="ProfileEditForm.pug",a=31,t="ProfileEditForm.pug",s=(s+='<div class="group surname-Profile-edit">')+'<input class="Input" type="text" name="profile_lastName"'+X("required",!0,!0,!1)+X("value",e.surname,!0,!1)+"/>",a=32,t="ProfileEditForm.pug",s+='<span class="bar"></span>',a=33,t="ProfileEditForm.pug",s+='<label class="label-input">',a=33,t="ProfileEditForm.pug",s+="Фамилия</label></div>",a=36,t="ProfileEditForm.pug",s+='<div class="input-file updateImg-Profile-edit">',a=37,t="ProfileEditForm.pug",s+='<div class="form-group">',a=38,t="ProfileEditForm.pug",s+='<input class="input-file" type="file" name="avatar" id="file"/>',a=39,t="ProfileEditForm.pug",s+='<label class="btn btn-tertiary js-labelFile" for="file">',a=40,t="ProfileEditForm.pug",s+='<span class="js-fileName">',a=40,t="ProfileEditForm.pug",s+="Обновить аватар</span></label></div></div>",a=42,t="ProfileEditForm.pug",s+='<button class="Button button-back-edit Button-state-passive" name="back">',a=42,t="ProfileEditForm.pug",s+="Назад</button>",a=43,t="ProfileEditForm.pug",s+='<button class="Button button-submit-edit Button-state-accept" name="submit">',a=43,t="ProfileEditForm.pug",s+="Подтвердить</button></form></div>",a=45,t="ProfileEditForm.pug",s+="\x3c!--export {template}--\x3e"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,t,a,i[t])}return s}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,S.on(g.profileEdit.fail,this.showErrors.bind(this))}var t,n,s;return t=e,(n=[{key:"render",value:function(e){if(e){this.element.innerHTML="",Y.render(),this.element.insertAdjacentHTML("beforeend",te(e));var t=document.getElementsByTagName("form")[0],n=document.getElementsByName("back")[0];t.addEventListener("submit",(function(e){e.preventDefault(),console.log("SUBMIT PROFILE EDIT"),S.emit(r.submit,{target:"ProfileEditView",data:new FormData(t)})})),n.addEventListener("click",(function(e){e.preventDefault(),S.emit(a.goBack)}))}else S.emit(r.needUserData)}},{key:"showErrors",value:function(e){console.log("PROFILE EDIT Errors",e)}}])&&ne(t.prototype,n),s&&ne(t,s),e}();function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ie=new(function(){function e(t,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=n,S.on(g.profileEdit.success,(function(e){S.emit(a.redirect,{path:b,data:e})})),S.on(r.needUserData,(function(){s.view.render(s.model.user)}))}var t,n,s;return t=e,(n=[{key:"setView",value:function(e){this.view=e}},{key:"setModel",value:function(e){this.model=e}}])&&se(t.prototype,n),s&&se(t,s),e}());function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=re(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=oe(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function oe(e){var t=""+e,n=ue.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}var ue=/["&<>]/;function ce(e){var t,a,s,i="";try{var r={"mainPage.pug":'\ndiv(class="mainPage")\n\n    if(locals.folderList)\n        div(class="folders-main")\n            ul(class="listView")\n                li(class="folder") Входящие\n                li(class="folder") Исходящие\n\n    if(locals.letterList)\n        div(class="letterlist-main")\n            ul(class="listView" name=\'letterList\')\n                each letter in locals.letterList\n                    - date = new Date(letter.DateTime * 1000)\n                    li()\n                        if(locals.letter.Id===letter.Id)\n                            div(id=letter.Id class="letter-title state-checked")\n                                label(class="label theme-title") #{letter.Theme}\n                                label(class="label sender-title") #{letter.Sender}\n                                label(class="label datetime-title") #{date.toLocaleTimeString()}\n                                label(class="label text-title") #{letter.Text}\n                        else\n                            div(id=letter.Id class="letter-title")\n                                label(class="label theme-title") #{letter.Theme}\n                                label(class="label sender-title") #{letter.Sender}\n                                label(class="label datetime-title") #{date.toLocaleTimeString()}\n                                label(class="label text-title") #{letter.Text}\n\n\n\n    if(locals.letter)\n        - date = new Date(locals.letter.DateTime * 1000)\n\n        div(class="letter-main")\n            div(class="letter-view")\n                div(class="senderTitle-view")\n                    div(class="group input-theme-writeLetter")\n                        input(class="Input disabled-input" type="text" placeholder=locals.letter.Sender)\n                        span(class="bar")\n                        label(class="label-input") От\n\n                div(class="themeTitle-view")\n                    div(class="group input-theme-writeLetter")\n                        input(class="Input disabled-input" type="text" placeholder=locals.letter.Theme)\n                        span(class="bar")\n                        label(class="label-input") Тема\n\n                label(class="label dateTime-view") #{date.toLocaleTimeString()}  #{date.toLocaleDateString()}\n                textarea(class="textarea disabled-input p-letter-text text-view")  #{locals.letter.Text}\n\n//export {template}'},l=e||{};(function(n,r){s=2,a="mainPage.pug",i+='<div class="mainPage">',s=4,a="mainPage.pug",e.folderList&&(s=5,a="mainPage.pug",i+='<div class="folders-main">',s=6,a="mainPage.pug",i+='<ul class="listView">',s=7,a="mainPage.pug",i+='<li class="folder">',s=7,a="mainPage.pug",i+="Входящие</li>",s=8,a="mainPage.pug",i+='<li class="folder">',s=8,a="mainPage.pug",i+="Исходящие</li></ul></div>"),s=10,a="mainPage.pug",e.letterList&&(s=11,a="mainPage.pug",i+='<div class="letterlist-main">',s=12,a="mainPage.pug",i+='<ul class="listView" name="letterList">',s=13,a="mainPage.pug",function(){var l=e.letterList;if("number"==typeof l.length)for(var o=0,u=l.length;o<u;o++){var c=l[o];s=14,a="mainPage.pug",r=new n(1e3*c.DateTime),s=15,a="mainPage.pug",i+="<li>",s=16,a="mainPage.pug",e.letter.Id===c.Id?(s=17,a="mainPage.pug",i=i+'<div class="letter-title state-checked"'+le("id",c.Id,!0,!1)+">",s=18,a="mainPage.pug",s=18,a="mainPage.pug",i=(i+='<label class="label theme-title">')+oe(null==(t=c.Theme)?"":t)+"</label>",s=19,a="mainPage.pug",s=19,a="mainPage.pug",i=(i+='<label class="label sender-title">')+oe(null==(t=c.Sender)?"":t)+"</label>",s=20,a="mainPage.pug",s=20,a="mainPage.pug",i=(i+='<label class="label datetime-title">')+oe(null==(t=r.toLocaleTimeString())?"":t)+"</label>",s=21,a="mainPage.pug",s=21,a="mainPage.pug",i=(i+='<label class="label text-title">')+oe(null==(t=c.Text)?"":t)+"</label></div>"):(s=23,a="mainPage.pug",i=i+'<div class="letter-title"'+le("id",c.Id,!0,!1)+">",s=24,a="mainPage.pug",s=24,a="mainPage.pug",i=(i+='<label class="label theme-title">')+oe(null==(t=c.Theme)?"":t)+"</label>",s=25,a="mainPage.pug",s=25,a="mainPage.pug",i=(i+='<label class="label sender-title">')+oe(null==(t=c.Sender)?"":t)+"</label>",s=26,a="mainPage.pug",s=26,a="mainPage.pug",i=(i+='<label class="label datetime-title">')+oe(null==(t=r.toLocaleTimeString())?"":t)+"</label>",s=27,a="mainPage.pug",s=27,a="mainPage.pug",i=(i+='<label class="label text-title">')+oe(null==(t=c.Text)?"":t)+"</label></div>"),i+="</li>"}else{u=0;for(var o in l){u++;c=l[o];s=14,a="mainPage.pug",r=new n(1e3*c.DateTime),s=15,a="mainPage.pug",i+="<li>",s=16,a="mainPage.pug",e.letter.Id===c.Id?(s=17,a="mainPage.pug",i=i+'<div class="letter-title state-checked"'+le("id",c.Id,!0,!1)+">",s=18,a="mainPage.pug",s=18,a="mainPage.pug",i=(i+='<label class="label theme-title">')+oe(null==(t=c.Theme)?"":t)+"</label>",s=19,a="mainPage.pug",s=19,a="mainPage.pug",i=(i+='<label class="label sender-title">')+oe(null==(t=c.Sender)?"":t)+"</label>",s=20,a="mainPage.pug",s=20,a="mainPage.pug",i=(i+='<label class="label datetime-title">')+oe(null==(t=r.toLocaleTimeString())?"":t)+"</label>",s=21,a="mainPage.pug",s=21,a="mainPage.pug",i=(i+='<label class="label text-title">')+oe(null==(t=c.Text)?"":t)+"</label></div>"):(s=23,a="mainPage.pug",i=i+'<div class="letter-title"'+le("id",c.Id,!0,!1)+">",s=24,a="mainPage.pug",s=24,a="mainPage.pug",i=(i+='<label class="label theme-title">')+oe(null==(t=c.Theme)?"":t)+"</label>",s=25,a="mainPage.pug",s=25,a="mainPage.pug",i=(i+='<label class="label sender-title">')+oe(null==(t=c.Sender)?"":t)+"</label>",s=26,a="mainPage.pug",s=26,a="mainPage.pug",i=(i+='<label class="label datetime-title">')+oe(null==(t=r.toLocaleTimeString())?"":t)+"</label>",s=27,a="mainPage.pug",s=27,a="mainPage.pug",i=(i+='<label class="label text-title">')+oe(null==(t=c.Text)?"":t)+"</label></div>"),i+="</li>"}}}.call(this),i+="</ul></div>"),s=31,a="mainPage.pug",e.letter&&(s=32,a="mainPage.pug",r=new n(1e3*e.letter.DateTime),s=34,a="mainPage.pug",i+='<div class="letter-main">',s=35,a="mainPage.pug",i+='<div class="letter-view">',s=36,a="mainPage.pug",i+='<div class="senderTitle-view">',s=37,a="mainPage.pug",s=38,a="mainPage.pug",i=(i+='<div class="group input-theme-writeLetter">')+'<input class="Input disabled-input" type="text"'+le("placeholder",e.letter.Sender,!0,!1)+"/>",s=39,a="mainPage.pug",i+='<span class="bar"></span>',s=40,a="mainPage.pug",i+='<label class="label-input">',s=40,a="mainPage.pug",i+="От</label></div></div>",s=42,a="mainPage.pug",i+='<div class="themeTitle-view">',s=43,a="mainPage.pug",s=44,a="mainPage.pug",i=(i+='<div class="group input-theme-writeLetter">')+'<input class="Input disabled-input" type="text"'+le("placeholder",e.letter.Theme,!0,!1)+"/>",s=45,a="mainPage.pug",i+='<span class="bar"></span>',s=46,a="mainPage.pug",i+='<label class="label-input">',s=46,a="mainPage.pug",i+="Тема</label></div></div>",s=48,a="mainPage.pug",i+='<label class="label dateTime-view">',s=48,a="mainPage.pug",i+=oe(null==(t=r.toLocaleTimeString())?"":t),s=48,a="mainPage.pug",s=48,a="mainPage.pug",i=(i+="  ")+oe(null==(t=r.toLocaleDateString())?"":t)+"</label>",s=49,a="mainPage.pug",i+='<textarea class="textarea disabled-input p-letter-text text-view">',s=49,a="mainPage.pug",s=49,a="mainPage.pug",i=(i+=" ")+oe(null==(t=e.letter.Text)?"":t)+"</textarea></div></div>"),i+="</div>",s=51,a="mainPage.pug",i+="\x3c!--export {template}--\x3e"}).call(this,"Date"in l?l.Date:"undefined"!=typeof Date?Date:void 0,"date"in l?l.date:"undefined"!=typeof date?date:void 0)}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,a,s,r[a])}return i}function pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var me=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,a;return t=e,(n=[{key:"render",value:function(e){console.log("RENDER MAIN PAGE DATA, dat",e),e&&e.letterList&&e.folderList?(this.element.innerHTML="",Y.render(),this.element.insertAdjacentHTML("beforeend",ce(e)),document.getElementsByName("letterList")[0].addEventListener("click",(function(e){if(console.log("CLICK LETTER"),"DIV"===e.target.tagName)return console.log("DIV ID ",e.target.id),void S.emit(o.selectLetter,e.target.id);S.emit(o.selectLetter,e.target.parentNode.id)}))):S.emit(o.needData)}}])&&pe(t.prototype,n),a&&pe(t,a),e}();function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var de=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainPageView=t,this.data={},S.on(m.getLetter.success,(function(e){n.data.letter=e})),S.on(m.getLetterList.success,(function(e){n.data.letterList=e})),S.on(m.getFolderList.success,(function(e){n.data.folderList=e})),S.on(o.needData,(function(){S.emit(u.needGetFolderList),S.emit(u.needGetLetterList),n.data.letter=n.data.letterList[3541230504],n.mainPageView.render(n.data)})),S.on(o.selectLetter,(function(e){console.log("SELECT LETTER ",e,n.data.letterList),n.data.letter=n.data.letterList[e],n.mainPageView.render(n.data)})),S.on(m.sendLetter.success,(function(){S.emit(a.redirect,{path:h})}))}var t,n,s;return t=e,(n=[{key:"_allDataIsReady",value:function(){this.data.folderList&&this.data.letterList&&console.log("ALL DATA IS READY")}}])&&ge(t.prototype,n),s&&ge(t,s),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var s=fe(t);return"object"!==s&&"function"!==s||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=function(e){var t=""+e,n=ve.exec(t);if(!n)return e;var a,s,i,r="";for(a=n.index,s=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var ve=/["&<>]/;function he(e){var t,a,s="";try{var i={"SendLetterForm.pug":"//include BaseComponents/classNames\n//include BaseComponents/pageTitle\n//include  BaseComponents/button\n//\n//+pageTitle('Отправить письмо')\n//\n//form(method='POST', name='sendLetterForm' class=classNames.formClass)\n//    p(class='InputTitle') Получатель\n//    input(type='text', name='to', class=classNames.inputClass)\n//    p(class='InputTitle') Тема\n//    input(type='text', name='theme', class=classNames.inputClass)\n//    p(class='InputTitle') Текст\n//    input(type='text', name='text', class=classNames.inputClass)\n//    input(type='submit', value='Отправить письмо', class='submit', class=classNames.inputClass)\n//    +button('Назад', 'back', classNames.regButton)\n//\n////export { template };\n\ndiv(class=\"Page-WriteLetter\")\n\n    form(method='POST', name='sendLetterForm' class=\"Form-WriteLetter\")\n        div(class=\"group input-reciever-writeLetter\") \n            input(class=\"Input\" name='to' type=\"text\" required)\n            span(class=\"bar\") \n            label(class=\"label-input\") Кому\n        \n        div(class=\"group input-theme-writeLetter\") \n            input(class=\"Input\" name='theme' type=\"text\" required)\n            span(class=\"bar\") \n            label(class=\"label-input\") Тема\n        \n        div(class=\"input-text-writeLetter\") \n            textarea(class=\"textarea input-letter-text\" name='text' placeholder=\"Письмо\" type=\"text\" required)\n        \n        div(class=\"row__item buttons-writeLetter AcceptBackButtonForm\") \n            button(class=\"Button Button-state-passive\" name=\"back\") Назад\n            button(class=\"Button dekipoldag-kutensa button-send-writeLetter\" type=\"submit\") Отправить\n"};a=1,t="SendLetterForm.pug",s+="\x3c!--include BaseComponents/classNames--\x3e",a=2,t="SendLetterForm.pug",s+="\x3c!--include BaseComponents/pageTitle--\x3e",a=3,t="SendLetterForm.pug",s+="\x3c!--include  BaseComponents/button--\x3e",a=4,t="SendLetterForm.pug",s+="\x3c!----\x3e",a=5,t="SendLetterForm.pug",s+="\x3c!--+pageTitle('Отправить письмо')--\x3e",a=6,t="SendLetterForm.pug",s+="\x3c!----\x3e",a=7,t="SendLetterForm.pug",s+="\x3c!--form(method='POST', name='sendLetterForm' class=classNames.formClass)--\x3e",a=8,t="SendLetterForm.pug",s+="\x3c!--    p(class='InputTitle') Получатель--\x3e",a=9,t="SendLetterForm.pug",s+="\x3c!--    input(type='text', name='to', class=classNames.inputClass)--\x3e",a=10,t="SendLetterForm.pug",s+="\x3c!--    p(class='InputTitle') Тема--\x3e",a=11,t="SendLetterForm.pug",s+="\x3c!--    input(type='text', name='theme', class=classNames.inputClass)--\x3e",a=12,t="SendLetterForm.pug",s+="\x3c!--    p(class='InputTitle') Текст--\x3e",a=13,t="SendLetterForm.pug",s+="\x3c!--    input(type='text', name='text', class=classNames.inputClass)--\x3e",a=14,t="SendLetterForm.pug",s+="\x3c!--    input(type='submit', value='Отправить письмо', class='submit', class=classNames.inputClass)--\x3e",a=15,t="SendLetterForm.pug",s+="\x3c!--    +button('Назад', 'back', classNames.regButton)--\x3e",a=16,t="SendLetterForm.pug",s+="\x3c!----\x3e",a=17,t="SendLetterForm.pug",s+="\x3c!--//export { template };--\x3e",a=19,t="SendLetterForm.pug",s+='<div class="Page-WriteLetter">',a=21,t="SendLetterForm.pug",s+='<form class="Form-WriteLetter" method="POST" name="sendLetterForm">',a=22,t="SendLetterForm.pug",s+='<div class="group input-reciever-writeLetter">',a=22,t="SendLetterForm.pug",a=23,t="SendLetterForm.pug",s=(s+=" ")+'<input class="Input" name="to" type="text"'+be("required",!0,!0,!1)+"/>",a=24,t="SendLetterForm.pug",s+='<span class="bar">',a=24,t="SendLetterForm.pug",s+=" </span>",a=25,t="SendLetterForm.pug",s+='<label class="label-input">',a=25,t="SendLetterForm.pug",s+="Кому</label></div>",a=27,t="SendLetterForm.pug",s+='<div class="group input-theme-writeLetter">',a=27,t="SendLetterForm.pug",a=28,t="SendLetterForm.pug",s=(s+=" ")+'<input class="Input" name="theme" type="text"'+be("required",!0,!0,!1)+"/>",a=29,t="SendLetterForm.pug",s+='<span class="bar">',a=29,t="SendLetterForm.pug",s+=" </span>",a=30,t="SendLetterForm.pug",s+='<label class="label-input">',a=30,t="SendLetterForm.pug",s+="Тема</label></div>",a=32,t="SendLetterForm.pug",s+='<div class="input-text-writeLetter">',a=32,t="SendLetterForm.pug",a=33,t="SendLetterForm.pug",s=(s+=" ")+'<textarea class="textarea input-letter-text" name="text" placeholder="Письмо" type="text"'+be("required",!0,!0,!1)+"></textarea></div>",a=35,t="SendLetterForm.pug",s+='<div class="row__item buttons-writeLetter AcceptBackButtonForm">',a=35,t="SendLetterForm.pug",s+=" ",a=36,t="SendLetterForm.pug",s+='<button class="Button Button-state-passive" name="back">',a=36,t="SendLetterForm.pug",s+="Назад</button>",a=37,t="SendLetterForm.pug",s+='<button class="Button dekipoldag-kutensa button-send-writeLetter" type="submit">',a=37,t="SendLetterForm.pug",s+="Отправить</button></div></form></div>"}catch(e){!function e(t,a,s,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+s,t;try{i=i||n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()).readFileSync(a,"utf8")}catch(a){e(t,null,s)}var r=3,l=i.split("\n"),o=Math.max(s-r,0),u=Math.min(l.length,s+r);throw r=l.slice(o,u).map((function(e,t){var n=t+o+1;return(n==s?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=a,t.message=(a||"Pug")+":"+s+"\n"+r+"\n\n"+t.message,t}(e,t,a,i[t])}return s}function ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}var t,n,a;return t=e,(n=[{key:"render",value:function(e){e=e||{},console.log("SEND LETTER VIEW RENDER"),this.element.innerHTML="",Y.render(),this.element.insertAdjacentHTML("beforeend",he());var t=document.getElementsByTagName("FORM")[0];t.addEventListener("submit",(function(e){e.preventDefault(),S.emit(c.sendLetter,new FormData(t))}))}}])&&ye(t.prototype,n),a&&ye(t,a),e}();function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Se=new(function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S.on(p.needData,(function(){a.navbarView.render({avatar:a.userModel.user.avatar})}))}var t,n,a;return t=e,(n=[{key:"setNavbarView",value:function(e){this.navbarView=e}},{key:"setUserModel",value:function(e){this.userModel=e}}])&&Pe(t.prototype,n),a&&Pe(t,a),e}());function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Fe=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S.on(l.needUserData,(function(){t.profileView.render(t.model.user)}))}var t,n,a;return t=e,(n=[{key:"setView",value:function(e){this.profileView=e}},{key:"setModel",value:function(e){this.model=e}}])&&we(t.prototype,n),a&&we(t,a),e}()),Le=new F,Ee=new k(document.body),Te=new D(document.body),Ie=new $(document.body),Ce=new ae(document.body),ke=new me(document.body),Ne=new xe(document.body);R.setUrl("http://localhost:8080");var Ue=new H("http://localhost:8080");new function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.signInView=t,this.model=n,S.on(g.signIn.success,(function(e){S.emit(a.redirect,{path:h})}))}(Ee,R),new function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.signInView=t,this.model=n,S.on(g.signUp.success,(function(e){console.log({path:b,data:e}),S.emit(a.redirect,{path:h,data:e})}))}(Te,R),new de(ke);Se.setNavbarView(Y),Se.setUserModel(R),ie.setView(Ce),ie.setModel(R),Fe.setView(Ie),Fe.setModel(R),Le.register(d,Ee),Le.register(f,Te),Le.register(b,Ie),Le.register(v,Ce),Le.register(h,ke),Le.register(y,Ne),console.log(location.pathname),R.getUserData(),S.on(g.profileGetData.success,(function e(){console.log("h1"),S.off(g.profileGetData.success,e),Ue.getFolders()})),S.on(m.getFolderList.success,(function e(){console.log("h2"),S.off(m.getFolderList.success,e),Ue.getLetterList()})),S.on(m.getLetterList.success,(function e(){console.log("h3"),S.off(m.getLetterList.success,e);try{Le.start(location.pathname)}catch(e){console.log("CATCH PATH, err",e),Le.start(d)}})),S.on(g.profileGetData.fail,(function e(){S.off(g.profileGetData.fail,e),console.log("h4"),Le.start(d)}))}]);